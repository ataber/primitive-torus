!function t(e,r,n){function i(a,s){if(!r[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[a]={exports:{}};e[a][0].call(l.exports,function(t){var r=e[a][1][t];return i(r?r:t)},l,l.exports,t,e,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(t,e,r){function n(t){t=t||{};for(var e=i(t.majorRadius,1),r=i(t.minorRadius,.25),n=i(t.minorSegments,32),s=i(t.majorSegments,64),u=i(t.arc,2*Math.PI),c=2*Math.PI,l=[0,0,0],f=[],h=[],p=[],d=[0,0,0],v=[],g=0;n>=g;g++)for(var m=0;s>=m;m++){var y=m/s*u,b=g/n*c;l[0]=e*Math.cos(y),l[1]=e*Math.sin(y);var w=[(e+r*Math.cos(b))*Math.cos(y),(e+r*Math.cos(b))*Math.sin(y),r*Math.sin(b)];h.push(w),o(d,w,l),a(d,d),v.push(d.slice()),f.push([m/s,g/n])}for(var g=1;n>=g;g++)for(var m=1;s>=m;m++){var _=(s+1)*g+m-1,A=(s+1)*(g-1)+m-1,M=(s+1)*(g-1)+m,E=(s+1)*g+m;p.push([_,A,E]),p.push([A,M,E])}return{uvs:f,cells:p,normals:v,positions:h}}var i=t("defined"),o=t("gl-vec3/subtract"),a=t("gl-vec3/normalize");t("gl-vec3/copy");e.exports=n},{defined:11,"gl-vec3/copy":12,"gl-vec3/normalize":13,"gl-vec3/subtract":14}],2:[function(t,e,r){function n(t){return this instanceof n?(this.length=0,this.parent=void 0,"number"==typeof t?i(this,t):"string"==typeof t?o(this,t,arguments.length>1?arguments[1]:"utf8"):a(this,t)):arguments.length>1?new n(t,arguments[1]):new n(t)}function i(t,e){if(t=h(t,0>e?0:0|p(e)),!n.TYPED_ARRAY_SUPPORT)for(var r=0;e>r;r++)t[r]=0;return t}function o(t,e,r){("string"!=typeof r||""===r)&&(r="utf8");var n=0|v(e,r);return t=h(t,n),t.write(e,r),t}function a(t,e){if(n.isBuffer(e))return s(t,e);if(H(e))return u(t,e);if(null==e)throw new TypeError("must start with number, buffer, array or string");return"undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer?c(t,e):e.length?l(t,e):f(t,e)}function s(t,e){var r=0|p(e.length);return t=h(t,r),e.copy(t,0,0,r),t}function u(t,e){var r=0|p(e.length);t=h(t,r);for(var n=0;r>n;n+=1)t[n]=255&e[n];return t}function c(t,e){var r=0|p(e.length);t=h(t,r);for(var n=0;r>n;n+=1)t[n]=255&e[n];return t}function l(t,e){var r=0|p(e.length);t=h(t,r);for(var n=0;r>n;n+=1)t[n]=255&e[n];return t}function f(t,e){var r,n=0;"Buffer"===e.type&&H(e.data)&&(r=e.data,n=0|p(r.length)),t=h(t,n);for(var i=0;n>i;i+=1)t[i]=255&r[i];return t}function h(t,e){n.TYPED_ARRAY_SUPPORT?t=n._augment(new Uint8Array(e)):(t.length=e,t._isBuffer=!0);var r=0!==e&&e<=n.poolSize>>>1;return r&&(t.parent=G),t}function p(t){if(t>=W)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+W.toString(16)+" bytes");return 0|t}function d(t,e){if(!(this instanceof d))return new d(t,e);var r=new n(t,e);return delete r.parent,r}function v(t,e){if("string"!=typeof t&&(t=String(t)),0===t.length)return 0;switch(e||"utf8"){case"ascii":case"binary":case"raw":return t.length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*t.length;case"hex":return t.length>>>1;case"utf8":case"utf-8":return N(t).length;case"base64":return V(t).length;default:return t.length}}function g(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var o=e.length;if(o%2!==0)throw new Error("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;n>a;a++){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))throw new Error("Invalid hex string");t[r+a]=s}return a}function m(t,e,r,n){return D(N(e,t.length-r),t,r,n)}function y(t,e,r,n){return D(q(e),t,r,n)}function b(t,e,r,n){return y(t,e,r,n)}function w(t,e,r,n){return D(V(e),t,r,n)}function _(t,e,r,n){return D(U(e,t.length-r),t,r,n)}function A(t,e,r){return Y.fromByteArray(0===e&&r===t.length?t:t.slice(e,r))}function M(t,e,r){var n="",i="";r=Math.min(t.length,r);for(var o=e;r>o;o++)t[o]<=127?(n+=z(i)+String.fromCharCode(t[o]),i=""):i+="%"+t[o].toString(16);return n+z(i)}function E(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;r>i;i++)n+=String.fromCharCode(127&t[i]);return n}function x(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;r>i;i++)n+=String.fromCharCode(t[i]);return n}function j(t,e,r){var n=t.length;(!e||0>e)&&(e=0),(!r||0>r||r>n)&&(r=n);for(var i="",o=e;r>o;o++)i+=C(t[o]);return i}function k(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function I(t,e,r){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function L(t,e,r,i,o,a){if(!n.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(e>o||a>e)throw new RangeError("value is out of bounds");if(r+i>t.length)throw new RangeError("index out of range")}function S(t,e,r,n){0>e&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);o>i;i++)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function T(t,e,r,n){0>e&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);o>i;i++)t[r+i]=e>>>8*(n?i:3-i)&255}function B(t,e,r,n,i,o){if(e>i||o>e)throw new RangeError("value is out of bounds");if(r+n>t.length)throw new RangeError("index out of range");if(0>r)throw new RangeError("index out of range")}function O(t,e,r,n,i){return i||B(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),X.write(t,e,r,n,23,4),r+4}function F(t,e,r,n,i){return i||B(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),X.write(t,e,r,n,52,8),r+8}function P(t){if(t=R(t).replace(Z,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function R(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function C(t){return 16>t?"0"+t.toString(16):t.toString(16)}function N(t,e){e=e||1/0;for(var r,n=t.length,i=null,o=[],a=0;n>a;a++){if(r=t.charCodeAt(a),r>55295&&57344>r){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(56320>r){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&((e-=3)>-1&&o.push(239,191,189),i=null);if(128>r){if((e-=1)<0)break;o.push(r)}else if(2048>r){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(65536>r){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(2097152>r))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function q(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e}function U(t,e){for(var r,n,i,o=[],a=0;a<t.length&&!((e-=2)<0);a++)r=t.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function V(t){return Y.toByteArray(P(t))}function D(t,e,r,n){for(var i=0;n>i&&!(i+r>=e.length||i>=t.length);i++)e[i+r]=t[i];return i}function z(t){try{return decodeURIComponent(t)}catch(e){return String.fromCharCode(65533)}}var Y=t("base64-js"),X=t("ieee754"),H=t("is-array");r.Buffer=n,r.SlowBuffer=d,r.INSPECT_MAX_BYTES=50,n.poolSize=8192;var W=1073741823,G={};n.TYPED_ARRAY_SUPPORT=function(){try{var t=new ArrayBuffer(0),e=new Uint8Array(t);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(r){return!1}}(),n.isBuffer=function(t){return!(null==t||!t._isBuffer)},n.compare=function(t,e){if(!n.isBuffer(t)||!n.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,i=e.length,o=0,a=Math.min(r,i);a>o&&t[o]===e[o];)++o;return o!==a&&(r=t[o],i=e[o]),i>r?-1:r>i?1:0},n.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(t,e){if(!H(t))throw new TypeError("list argument must be an Array of Buffers.");if(0===t.length)return new n(0);if(1===t.length)return t[0];var r;if(void 0===e)for(e=0,r=0;r<t.length;r++)e+=t[r].length;var i=new n(e),o=0;for(r=0;r<t.length;r++){var a=t[r];a.copy(i,o),o+=a.length}return i},n.byteLength=v,n.prototype.length=void 0,n.prototype.parent=void 0,n.prototype.toString=function(t,e,r){var n=!1;if(e=0|e,r=void 0===r||r===1/0?this.length:0|r,t||(t="utf8"),0>e&&(e=0),r>this.length&&(r=this.length),e>=r)return"";for(;;)switch(t){case"hex":return j(this,e,r);case"utf8":case"utf-8":return M(this,e,r);case"ascii":return E(this,e,r);case"binary":return x(this,e,r);case"base64":return A(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}},n.prototype.equals=function(t){if(!n.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:0===n.compare(this,t)},n.prototype.inspect=function(){var t="",e=r.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},n.prototype.compare=function(t){if(!n.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?0:n.compare(this,t)},n.prototype.indexOf=function(t,e){function r(t,e,r){for(var n=-1,i=0;r+i<t.length;i++)if(t[r+i]===e[-1===n?0:i-n]){if(-1===n&&(n=i),i-n+1===e.length)return r+n}else n=-1;return-1}if(e>2147483647?e=2147483647:-2147483648>e&&(e=-2147483648),e>>=0,0===this.length)return-1;if(e>=this.length)return-1;if(0>e&&(e=Math.max(this.length+e,0)),"string"==typeof t)return 0===t.length?-1:String.prototype.indexOf.call(this,t,e);if(n.isBuffer(t))return r(this,t,e);if("number"==typeof t)return n.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,t,e):r(this,[t],e);throw new TypeError("val must be string, number or Buffer")},n.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},n.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},n.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else if(isFinite(e))e=0|e,isFinite(r)?(r=0|r,void 0===n&&(n="utf8")):(n=r,r=void 0);else{var i=n;n=e,e=0|r,r=i}var o=this.length-e;if((void 0===r||r>o)&&(r=o),t.length>0&&(0>r||0>e)||e>this.length)throw new RangeError("attempt to write outside buffer bounds");n||(n="utf8");for(var a=!1;;)switch(n){case"hex":return g(this,t,e,r);case"utf8":case"utf-8":return m(this,t,e,r);case"ascii":return y(this,t,e,r);case"binary":return b(this,t,e,r);case"base64":return w(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _(this,t,e,r);default:if(a)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),a=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},n.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,0>t?(t+=r,0>t&&(t=0)):t>r&&(t=r),0>e?(e+=r,0>e&&(e=0)):e>r&&(e=r),t>e&&(e=t);var i;if(n.TYPED_ARRAY_SUPPORT)i=n._augment(this.subarray(t,e));else{var o=e-t;i=new n(o,void 0);for(var a=0;o>a;a++)i[a]=this[a+t]}return i.length&&(i.parent=this.parent||this),i},n.prototype.readUIntLE=function(t,e,r){t=0|t,e=0|e,r||I(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},n.prototype.readUIntBE=function(t,e,r){t=0|t,e=0|e,r||I(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},n.prototype.readUInt8=function(t,e){return e||I(t,1,this.length),this[t]},n.prototype.readUInt16LE=function(t,e){return e||I(t,2,this.length),this[t]|this[t+1]<<8},n.prototype.readUInt16BE=function(t,e){return e||I(t,2,this.length),this[t]<<8|this[t+1]},n.prototype.readUInt32LE=function(t,e){return e||I(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},n.prototype.readUInt32BE=function(t,e){return e||I(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},n.prototype.readIntLE=function(t,e,r){t=0|t,e=0|e,r||I(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},n.prototype.readIntBE=function(t,e,r){t=0|t,e=0|e,r||I(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},n.prototype.readInt8=function(t,e){return e||I(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},n.prototype.readInt16LE=function(t,e){e||I(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},n.prototype.readInt16BE=function(t,e){e||I(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},n.prototype.readInt32LE=function(t,e){return e||I(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},n.prototype.readInt32BE=function(t,e){return e||I(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},n.prototype.readFloatLE=function(t,e){return e||I(t,4,this.length),X.read(this,t,!0,23,4)},n.prototype.readFloatBE=function(t,e){return e||I(t,4,this.length),X.read(this,t,!1,23,4)},n.prototype.readDoubleLE=function(t,e){return e||I(t,8,this.length),X.read(this,t,!0,52,8)},n.prototype.readDoubleBE=function(t,e){return e||I(t,8,this.length),X.read(this,t,!1,52,8)},n.prototype.writeUIntLE=function(t,e,r,n){t=+t,e=0|e,r=0|r,n||L(this,t,e,r,Math.pow(2,8*r),0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},n.prototype.writeUIntBE=function(t,e,r,n){t=+t,e=0|e,r=0|r,n||L(this,t,e,r,Math.pow(2,8*r),0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},n.prototype.writeUInt8=function(t,e,r){return t=+t,e=0|e,r||L(this,t,e,1,255,0),n.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=t,e+1},n.prototype.writeUInt16LE=function(t,e,r){return t=+t,e=0|e,r||L(this,t,e,2,65535,0),n.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8):S(this,t,e,!0),e+2},n.prototype.writeUInt16BE=function(t,e,r){return t=+t,e=0|e,r||L(this,t,e,2,65535,0),n.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t):S(this,t,e,!1),e+2},n.prototype.writeUInt32LE=function(t,e,r){return t=+t,e=0|e,r||L(this,t,e,4,4294967295,0),n.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t):T(this,t,e,!0),e+4},n.prototype.writeUInt32BE=function(t,e,r){return t=+t,e=0|e,r||L(this,t,e,4,4294967295,0),n.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t):T(this,t,e,!1),e+4},n.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e=0|e,!n){var i=Math.pow(2,8*r-1);L(this,t,e,r,i-1,-i)}var o=0,a=1,s=0>t?1:0;for(this[e]=255&t;++o<r&&(a*=256);)this[e+o]=(t/a>>0)-s&255;return e+r},n.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e=0|e,!n){var i=Math.pow(2,8*r-1);L(this,t,e,r,i-1,-i)}var o=r-1,a=1,s=0>t?1:0;for(this[e+o]=255&t;--o>=0&&(a*=256);)this[e+o]=(t/a>>0)-s&255;return e+r},n.prototype.writeInt8=function(t,e,r){return t=+t,e=0|e,r||L(this,t,e,1,127,-128),n.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[e]=t,e+1},n.prototype.writeInt16LE=function(t,e,r){return t=+t,e=0|e,r||L(this,t,e,2,32767,-32768),n.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8):S(this,t,e,!0),e+2},n.prototype.writeInt16BE=function(t,e,r){return t=+t,e=0|e,r||L(this,t,e,2,32767,-32768),n.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t):S(this,t,e,!1),e+2},n.prototype.writeInt32LE=function(t,e,r){return t=+t,e=0|e,r||L(this,t,e,4,2147483647,-2147483648),n.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):T(this,t,e,!0),e+4},n.prototype.writeInt32BE=function(t,e,r){return t=+t,e=0|e,r||L(this,t,e,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),n.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t):T(this,t,e,!1),e+4},n.prototype.writeFloatLE=function(t,e,r){return O(this,t,e,!0,r)},n.prototype.writeFloatBE=function(t,e,r){return O(this,t,e,!1,r)},n.prototype.writeDoubleLE=function(t,e,r){return F(this,t,e,!0,r)},n.prototype.writeDoubleBE=function(t,e,r){return F(this,t,e,!1,r)},n.prototype.copy=function(t,e,r,i){if(r||(r=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&r>i&&(i=r),i===r)return 0;if(0===t.length||0===this.length)return 0;if(0>e)throw new RangeError("targetStart out of bounds");if(0>r||r>=this.length)throw new RangeError("sourceStart out of bounds");if(0>i)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-r&&(i=t.length-e+r);var o=i-r;if(1e3>o||!n.TYPED_ARRAY_SUPPORT)for(var a=0;o>a;a++)t[a+e]=this[a+r];else t._set(this.subarray(r,r+o),e);return o},n.prototype.fill=function(t,e,r){if(t||(t=0),e||(e=0),r||(r=this.length),e>r)throw new RangeError("end < start");if(r!==e&&0!==this.length){if(0>e||e>=this.length)throw new RangeError("start out of bounds");if(0>r||r>this.length)throw new RangeError("end out of bounds");var n;if("number"==typeof t)for(n=e;r>n;n++)this[n]=t;else{var i=N(t.toString()),o=i.length;for(n=e;r>n;n++)this[n]=i[n%o]}return this}},n.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(n.TYPED_ARRAY_SUPPORT)return new n(this).buffer;for(var t=new Uint8Array(this.length),e=0,r=t.length;r>e;e+=1)t[e]=this[e];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var Q=n.prototype;n._augment=function(t){return t.constructor=n,t._isBuffer=!0,t._set=t.set,t.get=Q.get,t.set=Q.set,t.write=Q.write,t.toString=Q.toString,t.toLocaleString=Q.toString,t.toJSON=Q.toJSON,t.equals=Q.equals,t.compare=Q.compare,t.indexOf=Q.indexOf,t.copy=Q.copy,t.slice=Q.slice,t.readUIntLE=Q.readUIntLE,t.readUIntBE=Q.readUIntBE,t.readUInt8=Q.readUInt8,t.readUInt16LE=Q.readUInt16LE,t.readUInt16BE=Q.readUInt16BE,t.readUInt32LE=Q.readUInt32LE,t.readUInt32BE=Q.readUInt32BE,t.readIntLE=Q.readIntLE,t.readIntBE=Q.readIntBE,t.readInt8=Q.readInt8,t.readInt16LE=Q.readInt16LE,t.readInt16BE=Q.readInt16BE,t.readInt32LE=Q.readInt32LE,t.readInt32BE=Q.readInt32BE,t.readFloatLE=Q.readFloatLE,t.readFloatBE=Q.readFloatBE,t.readDoubleLE=Q.readDoubleLE,t.readDoubleBE=Q.readDoubleBE,t.writeUInt8=Q.writeUInt8,t.writeUIntLE=Q.writeUIntLE,t.writeUIntBE=Q.writeUIntBE,t.writeUInt16LE=Q.writeUInt16LE,t.writeUInt16BE=Q.writeUInt16BE,t.writeUInt32LE=Q.writeUInt32LE,t.writeUInt32BE=Q.writeUInt32BE,t.writeIntLE=Q.writeIntLE,t.writeIntBE=Q.writeIntBE,t.writeInt8=Q.writeInt8,t.writeInt16LE=Q.writeInt16LE,t.writeInt16BE=Q.writeInt16BE,t.writeInt32LE=Q.writeInt32LE,t.writeInt32BE=Q.writeInt32BE,t.writeFloatLE=Q.writeFloatLE,t.writeFloatBE=Q.writeFloatBE,t.writeDoubleLE=Q.writeDoubleLE,t.writeDoubleBE=Q.writeDoubleBE,t.fill=Q.fill,t.inspect=Q.inspect,t.toArrayBuffer=Q.toArrayBuffer,t};var Z=/[^+\/0-9A-z\-]/g},{"base64-js":3,ieee754:4,"is-array":5}],3:[function(t,e,r){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===a||e===f?62:e===s||e===h?63:u>e?-1:u+10>e?e-u+26+26:l+26>e?e-l:c+26>e?e-c+26:void 0}function r(t){function r(t){c[f++]=t}var n,i,a,s,u,c;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var l=t.length;u="="===t.charAt(l-2)?2:"="===t.charAt(l-1)?1:0,c=new o(3*t.length/4-u),a=u>0?t.length-4:t.length;var f=0;for(n=0,i=0;a>n;n+=4,i+=3)s=e(t.charAt(n))<<18|e(t.charAt(n+1))<<12|e(t.charAt(n+2))<<6|e(t.charAt(n+3)),r((16711680&s)>>16),r((65280&s)>>8),r(255&s);return 2===u?(s=e(t.charAt(n))<<2|e(t.charAt(n+1))>>4,r(255&s)):1===u&&(s=e(t.charAt(n))<<10|e(t.charAt(n+1))<<4|e(t.charAt(n+2))>>2,r(s>>8&255),r(255&s)),c}function i(t){function e(t){return n.charAt(t)}function r(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var i,o,a,s=t.length%3,u="";for(i=0,a=t.length-s;a>i;i+=3)o=(t[i]<<16)+(t[i+1]<<8)+t[i+2],u+=r(o);switch(s){case 1:o=t[t.length-1],u+=e(o>>2),u+=e(o<<4&63),u+="==";break;case 2:o=(t[t.length-2]<<8)+t[t.length-1],u+=e(o>>10),u+=e(o>>4&63),u+=e(o<<2&63),u+="="}return u}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="+".charCodeAt(0),s="/".charCodeAt(0),u="0".charCodeAt(0),c="a".charCodeAt(0),l="A".charCodeAt(0),f="-".charCodeAt(0),h="_".charCodeAt(0);t.toByteArray=r,t.fromByteArray=i}("undefined"==typeof r?this.base64js={}:r)},{}],4:[function(t,e,r){r.read=function(t,e,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,c=u>>1,l=-7,f=r?i-1:0,h=r?-1:1,p=t[e+f];for(f+=h,o=p&(1<<-l)-1,p>>=-l,l+=s;l>0;o=256*o+t[e+f],f+=h,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=n;l>0;a=256*a+t[e+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:(p?-1:1)*(1/0);a+=Math.pow(2,n),o-=c}return(p?-1:1)*a*Math.pow(2,o-n)},r.write=function(t,e,r,n,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,v=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),e+=a+f>=1?h/u:h*Math.pow(2,1-f),e*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(e*u-1)*Math.pow(2,i),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[r+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[r+p]=255&a,p+=d,a/=256,c-=8);t[r+p-d]|=128*v}},{}],5:[function(t,e,r){var n=Array.isArray,i=Object.prototype.toString;e.exports=n||function(t){return!!t&&"[object Array]"==i.call(t)}},{}],6:[function(t,e,r){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function o(t){return"number"==typeof t}function a(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!o(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,r,n,o,u,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(r=this._events[t],s(r))return!1;if(i(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),u=1;n>u;u++)o[u-1]=arguments[u];r.apply(this,o)}else if(a(r)){for(n=arguments.length,o=new Array(n-1),u=1;n>u;u++)o[u-1]=arguments[u];for(c=r.slice(),n=c.length,u=0;n>u;u++)c[u].apply(this,o)}return!0},n.prototype.addListener=function(t,e){var r;if(!i(e))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?a(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,a(this._events[t])&&!this._events[t].warned){var r;r=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function r(){this.removeListener(t,r),n||(n=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var n=!1;return r.listener=e,this.on(t,r),this},n.prototype.removeListener=function(t,e){var r,n,o,s;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=this._events[t],o=r.length,n=-1,r===e||i(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(a(r)){for(s=o;s-->0;)if(r[s]===e||r[s].listener&&r[s].listener===e){n=s;break}if(0>n)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[t],i(r))this.removeListener(t,r);else for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.listenerCount=function(t,e){var r;return r=t._events&&t._events[e]?i(t._events[e])?1:t._events[e].length:0}},{}],7:[function(t,e,r){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},{}],8:[function(t,e,r){function n(){l=!1,s.length?c=s.concat(c):f=-1,c.length&&i()}function i(){if(!l){var t=setTimeout(n);l=!0;for(var e=c.length;e;){for(s=c,c=[];++f<e;)s[f].run();f=-1,e=c.length}s=null,l=!1,clearTimeout(t)}}function o(t,e){this.fun=t,this.array=e}function a(){}var s,u=e.exports={},c=[],l=!1,f=-1;u.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new o(t,e)),l||setTimeout(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=a,u.addListener=a,u.once=a,u.off=a,u.removeListener=a,u.removeAllListeners=a,u.emit=a,u.binding=function(t){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(t){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],9:[function(t,e,r){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],10:[function(t,e,r){(function(e,n){function i(t,e){var n={seen:[],stylize:a};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),v(e)?n.showHidden=e:e&&r._extend(n,e),_(n.showHidden)&&(n.showHidden=!1),_(n.depth)&&(n.depth=2),_(n.colors)&&(n.colors=!1),_(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),u(n,t,n.depth)}function o(t,e){var r=i.styles[e];return r?"["+i.colors[r][0]+"m"+t+"["+i.colors[r][1]+"m":t}function a(t,e){return t}function s(t){var e={};return t.forEach(function(t,r){e[t]=!0}),e}function u(t,e,n){if(t.customInspect&&e&&j(e.inspect)&&e.inspect!==r.inspect&&(!e.constructor||e.constructor.prototype!==e)){var i=e.inspect(n,t);return b(i)||(i=u(t,i,n)),i}var o=c(t,e);if(o)return o;var a=Object.keys(e),v=s(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(e)),x(e)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return l(e);if(0===a.length){if(j(e)){var g=e.name?": "+e.name:"";return t.stylize("[Function"+g+"]","special")}if(A(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(E(e))return t.stylize(Date.prototype.toString.call(e),"date");if(x(e))return l(e)}var m="",y=!1,w=["{","}"];if(d(e)&&(y=!0,w=["[","]"]),j(e)){var _=e.name?": "+e.name:"";m=" [Function"+_+"]"}if(A(e)&&(m=" "+RegExp.prototype.toString.call(e)),E(e)&&(m=" "+Date.prototype.toUTCString.call(e)),x(e)&&(m=" "+l(e)),0===a.length&&(!y||0==e.length))return w[0]+m+w[1];if(0>n)return A(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var M;return M=y?f(t,e,n,v,a):a.map(function(r){return h(t,e,n,v,r,y)}),t.seen.pop(),p(M,m,w)}function c(t,e){if(_(e))return t.stylize("undefined","undefined");if(b(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}return y(e)?t.stylize(""+e,"number"):v(e)?t.stylize(""+e,"boolean"):g(e)?t.stylize("null","null"):void 0}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,r,n,i){for(var o=[],a=0,s=e.length;s>a;++a)o.push(T(e,String(a))?h(t,e,r,n,String(a),!0):"");return i.forEach(function(i){i.match(/^\d+$/)||o.push(h(t,e,r,n,i,!0))}),o}function h(t,e,r,n,i,o){var a,s,c;if(c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},c.get?s=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(s=t.stylize("[Setter]","special")),T(n,i)||(a="["+i+"]"),s||(t.seen.indexOf(c.value)<0?(s=g(r)?u(t,c.value,null):u(t,c.value,r-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n"))):s=t.stylize("[Circular]","special")),_(a)){if(o&&i.match(/^\d+$/))return s;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function p(t,e,r){var n=0,i=t.reduce(function(t,e){return n++,e.indexOf("\n")>=0&&n++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}function d(t){return Array.isArray(t)}function v(t){return"boolean"==typeof t}function g(t){return null===t}function m(t){return null==t}function y(t){return"number"==typeof t}function b(t){return"string"==typeof t}function w(t){return"symbol"==typeof t}function _(t){return void 0===t}function A(t){return M(t)&&"[object RegExp]"===I(t)}function M(t){return"object"==typeof t&&null!==t}function E(t){return M(t)&&"[object Date]"===I(t)}function x(t){return M(t)&&("[object Error]"===I(t)||t instanceof Error)}function j(t){return"function"==typeof t}function k(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function I(t){return Object.prototype.toString.call(t)}function L(t){return 10>t?"0"+t.toString(10):t.toString(10)}function S(){var t=new Date,e=[L(t.getHours()),L(t.getMinutes()),L(t.getSeconds())].join(":");return[t.getDate(),P[t.getMonth()],e].join(" ")}function T(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var B=/%[sdj%]/g;r.format=function(t){if(!b(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(i(arguments[r]));return e.join(" ")}for(var r=1,n=arguments,o=n.length,a=String(t).replace(B,function(t){if("%%"===t)return"%";if(r>=o)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return t}}),s=n[r];o>r;s=n[++r])a+=g(s)||!M(s)?" "+s:" "+i(s);return a},r.deprecate=function(t,i){function o(){if(!a){if(e.throwDeprecation)throw new Error(i);e.traceDeprecation?console.trace(i):console.error(i),a=!0}return t.apply(this,arguments)}if(_(n.process))return function(){return r.deprecate(t,i).apply(this,arguments)};if(e.noDeprecation===!0)return t;var a=!1;return o};var O,F={};r.debuglog=function(t){if(_(O)&&(O=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!F[t])if(new RegExp("\\b"+t+"\\b","i").test(O)){var n=e.pid;F[t]=function(){var e=r.format.apply(r,arguments);console.error("%s %d: %s",t,n,e)}}else F[t]=function(){};return F[t]},r.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=d,r.isBoolean=v,r.isNull=g,r.isNullOrUndefined=m,r.isNumber=y,r.isString=b,r.isSymbol=w,r.isUndefined=_,r.isRegExp=A,r.isObject=M,r.isDate=E,r.isError=x,r.isFunction=j,r.isPrimitive=k,r.isBuffer=t("./support/isBuffer");var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];r.log=function(){console.log("%s - %s",S(),r.format.apply(r,arguments));
},r.inherits=t("inherits"),r._extend=function(t,e){if(!e||!M(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":9,_process:8,inherits:7}],11:[function(t,e,r){e.exports=function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]}},{}],12:[function(t,e,r){function n(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}e.exports=n},{}],13:[function(t,e,r){function n(t,e){var r=e[0],n=e[1],i=e[2],o=r*r+n*n+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t}e.exports=n},{}],14:[function(t,e,r){function n(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}e.exports=n},{}],15:[function(t,e,r){"use strict";function n(t){var e=i();return t.on("tick",function(){var r=t.down("control"),n=t.down("shift"),i=t.down("mouse-left"),o=t.down("mouse-right"),a=t.down("mouse-middle");if(!i||r||n||e.rotate([t.mouseX/t.width-.5,t.mouseY/t.height-.5],[t.prevMouseX/t.width-.5,t.prevMouseY/t.height-.5]),(o||i&&r&&!n)&&e.pan([(t.mouseX-t.prevMouseX)/t.width,(t.mouseY-t.prevMouseY)/t.height]),t.scroll[1]&&(e.distance*=Math.exp(t.scroll[1]/t.height)),a||i&&!r&&n){var s=t.mouseY-t.prevMouseY;s&&(e.distance*=Math.exp(s/t.height))}}),e}var i=t("orbit-camera");e.exports=n},{"orbit-camera":17}],16:[function(t,e,r){!function(t){"use strict";var e={};"undefined"==typeof r?"function"==typeof define&&"object"==typeof define.amd&&define.amd?(e.exports={},define(function(){return e.exports})):e.exports="undefined"!=typeof window?window:t:e.exports=r,function(t){if(!e)var e=1e-6;if(!r)var r="undefined"!=typeof Float32Array?Float32Array:Array;if(!n)var n=Math.random;var i={};i.setMatrixArrayType=function(t){r=t},"undefined"!=typeof t&&(t.glMatrix=i);var o=Math.PI/180;i.toRadian=function(t){return t*o};var a={};a.create=function(){var t=new r(2);return t[0]=0,t[1]=0,t},a.clone=function(t){var e=new r(2);return e[0]=t[0],e[1]=t[1],e},a.fromValues=function(t,e){var n=new r(2);return n[0]=t,n[1]=e,n},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},a.set=function(t,e,r){return t[0]=e,t[1]=r,t},a.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t},a.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t},a.sub=a.subtract,a.multiply=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t},a.mul=a.multiply,a.divide=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t},a.div=a.divide,a.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t},a.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t},a.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t},a.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t},a.distance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)},a.dist=a.distance,a.squaredDistance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n},a.sqrDist=a.squaredDistance,a.length=function(t){var e=t[0],r=t[1];return Math.sqrt(e*e+r*r)},a.len=a.length,a.squaredLength=function(t){var e=t[0],r=t[1];return e*e+r*r},a.sqrLen=a.squaredLength,a.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},a.normalize=function(t,e){var r=e[0],n=e[1],i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i),t},a.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},a.cross=function(t,e,r){var n=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=n,t},a.lerp=function(t,e,r,n){var i=e[0],o=e[1];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t},a.random=function(t,e){e=e||1;var r=2*n()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t},a.transformMat2=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i,t[1]=r[1]*n+r[3]*i,t},a.transformMat2d=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i+r[4],t[1]=r[1]*n+r[3]*i+r[5],t},a.transformMat3=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[3]*i+r[6],t[1]=r[1]*n+r[4]*i+r[7],t},a.transformMat4=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[4]*i+r[12],t[1]=r[1]*n+r[5]*i+r[13],t},a.forEach=function(){var t=a.create();return function(e,r,n,i,o,a){var s,u;for(r||(r=2),n||(n=0),u=i?Math.min(i*r+n,e.length):e.length,s=n;u>s;s+=r)t[0]=e[s],t[1]=e[s+1],o(t,t,a),e[s]=t[0],e[s+1]=t[1];return e}}(),a.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},"undefined"!=typeof t&&(t.vec2=a);var s={};s.create=function(){var t=new r(3);return t[0]=0,t[1]=0,t[2]=0,t},s.clone=function(t){var e=new r(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},s.fromValues=function(t,e,n){var i=new r(3);return i[0]=t,i[1]=e,i[2]=n,i},s.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},s.set=function(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t},s.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t},s.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t},s.sub=s.subtract,s.multiply=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t},s.mul=s.multiply,s.divide=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t},s.div=s.divide,s.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t},s.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t},s.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t},s.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t},s.distance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(r*r+n*n+i*i)},s.dist=s.distance,s.squaredDistance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return r*r+n*n+i*i},s.sqrDist=s.squaredDistance,s.length=function(t){var e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)},s.len=s.length,s.squaredLength=function(t){var e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n},s.sqrLen=s.squaredLength,s.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},s.normalize=function(t,e){var r=e[0],n=e[1],i=e[2],o=r*r+n*n+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t},s.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},s.cross=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=r[0],s=r[1],u=r[2];return t[0]=i*u-o*s,t[1]=o*a-n*u,t[2]=n*s-i*a,t},s.lerp=function(t,e,r,n){var i=e[0],o=e[1],a=e[2];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t[2]=a+n*(r[2]-a),t},s.random=function(t,e){e=e||1;var r=2*n()*Math.PI,i=2*n()-1,o=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(r)*o,t[1]=Math.sin(r)*o,t[2]=i*e,t},s.transformMat4=function(t,e,r){var n=e[0],i=e[1],o=e[2];return t[0]=r[0]*n+r[4]*i+r[8]*o+r[12],t[1]=r[1]*n+r[5]*i+r[9]*o+r[13],t[2]=r[2]*n+r[6]*i+r[10]*o+r[14],t},s.transformMat3=function(t,e,r){var n=e[0],i=e[1],o=e[2];return t[0]=n*r[0]+i*r[3]+o*r[6],t[1]=n*r[1]+i*r[4]+o*r[7],t[2]=n*r[2]+i*r[5]+o*r[8],t},s.transformQuat=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=r[0],s=r[1],u=r[2],c=r[3],l=c*n+s*o-u*i,f=c*i+u*n-a*o,h=c*o+a*i-s*n,p=-a*n-s*i-u*o;return t[0]=l*c+p*-a+f*-u-h*-s,t[1]=f*c+p*-s+h*-a-l*-u,t[2]=h*c+p*-u+l*-s-f*-a,t},s.rotateX=function(t,e,r,n){var i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[0],o[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),o[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},s.rotateY=function(t,e,r,n){var i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),o[1]=i[1],o[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},s.rotateZ=function(t,e,r,n){var i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),o[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),o[2]=i[2],t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},s.forEach=function(){var t=s.create();return function(e,r,n,i,o,a){var s,u;for(r||(r=3),n||(n=0),u=i?Math.min(i*r+n,e.length):e.length,s=n;u>s;s+=r)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}(),s.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},"undefined"!=typeof t&&(t.vec3=s);var u={};u.create=function(){var t=new r(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},u.clone=function(t){var e=new r(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},u.fromValues=function(t,e,n,i){var o=new r(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=i,o},u.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},u.set=function(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t},u.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t},u.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t},u.sub=u.subtract,u.multiply=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t},u.mul=u.multiply,u.divide=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t},u.div=u.divide,u.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t},u.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t},u.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t},u.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t},u.distance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(r*r+n*n+i*i+o*o)},u.dist=u.distance,u.squaredDistance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return r*r+n*n+i*i+o*o},u.sqrDist=u.squaredDistance,u.length=function(t){var e=t[0],r=t[1],n=t[2],i=t[3];return Math.sqrt(e*e+r*r+n*n+i*i)},u.len=u.length,u.squaredLength=function(t){var e=t[0],r=t[1],n=t[2],i=t[3];return e*e+r*r+n*n+i*i},u.sqrLen=u.squaredLength,u.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},u.normalize=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r*r+n*n+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t[3]=e[3]*a),t},u.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},u.lerp=function(t,e,r,n){var i=e[0],o=e[1],a=e[2],s=e[3];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t[2]=a+n*(r[2]-a),t[3]=s+n*(r[3]-s),t},u.random=function(t,e){return e=e||1,t[0]=n(),t[1]=n(),t[2]=n(),t[3]=n(),u.normalize(t,t),u.scale(t,t,e),t},u.transformMat4=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*a,t[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*a,t[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*a,t[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*a,t},u.transformQuat=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=r[0],s=r[1],u=r[2],c=r[3],l=c*n+s*o-u*i,f=c*i+u*n-a*o,h=c*o+a*i-s*n,p=-a*n-s*i-u*o;return t[0]=l*c+p*-a+f*-u-h*-s,t[1]=f*c+p*-s+h*-a-l*-u,t[2]=h*c+p*-u+l*-s-f*-a,t},u.forEach=function(){var t=u.create();return function(e,r,n,i,o,a){var s,u;for(r||(r=4),n||(n=0),u=i?Math.min(i*r+n,e.length):e.length,s=n;u>s;s+=r)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}(),u.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},"undefined"!=typeof t&&(t.vec4=u);var c={};c.create=function(){var t=new r(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},c.clone=function(t){var e=new r(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},c.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},c.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},c.transpose=function(t,e){if(t===e){var r=e[1];t[1]=e[2],t[2]=r}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},c.invert=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r*o-i*n;return a?(a=1/a,t[0]=o*a,t[1]=-n*a,t[2]=-i*a,t[3]=r*a,t):null},c.adjoint=function(t,e){var r=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=r,t},c.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},c.multiply=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=r[0],u=r[1],c=r[2],l=r[3];return t[0]=n*s+o*u,t[1]=i*s+a*u,t[2]=n*c+o*l,t[3]=i*c+a*l,t},c.mul=c.multiply,c.rotate=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u+o*s,t[1]=i*u+a*s,t[2]=n*-s+o*u,t[3]=i*-s+a*u,t},c.scale=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=r[0],u=r[1];return t[0]=n*s,t[1]=i*s,t[2]=o*u,t[3]=a*u,t},c.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},c.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},c.LDU=function(t,e,r,n){return t[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-t[2]*r[1],[t,e,r]},"undefined"!=typeof t&&(t.mat2=c);var l={};l.create=function(){var t=new r(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},l.clone=function(t){var e=new r(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},l.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},l.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},l.invert=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=r*o-n*i;return u?(u=1/u,t[0]=o*u,t[1]=-n*u,t[2]=-i*u,t[3]=r*u,t[4]=(i*s-o*a)*u,t[5]=(n*a-r*s)*u,t):null},l.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},l.multiply=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=r[0],l=r[1],f=r[2],h=r[3],p=r[4],d=r[5];return t[0]=n*c+o*l,t[1]=i*c+a*l,t[2]=n*f+o*h,t[3]=i*f+a*h,t[4]=n*p+o*d+s,t[5]=i*p+a*d+u,t},l.mul=l.multiply,l.rotate=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=Math.sin(r),l=Math.cos(r);return t[0]=n*l+o*c,t[1]=i*l+a*c,t[2]=n*-c+o*l,t[3]=i*-c+a*l,t[4]=s,t[5]=u,t},l.scale=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=r[0],l=r[1];return t[0]=n*c,t[1]=i*c,t[2]=o*l,t[3]=a*l,t[4]=s,t[5]=u,t},l.translate=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=r[0],l=r[1];return t[0]=n,t[1]=i,t[2]=o,t[3]=a,t[4]=n*c+o*l+s,t[5]=i*c+a*l+u,t},l.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},l.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},"undefined"!=typeof t&&(t.mat2d=l);var f={};f.create=function(){var t=new r(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},f.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},f.clone=function(t){var e=new r(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},f.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},f.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},f.transpose=function(t,e){if(t===e){var r=e[1],n=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},f.invert=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=l*a-s*c,h=-l*o+s*u,p=c*o-a*u,d=r*f+n*h+i*p;return d?(d=1/d,t[0]=f*d,t[1]=(-l*n+i*c)*d,t[2]=(s*n-i*a)*d,t[3]=h*d,t[4]=(l*r-i*u)*d,t[5]=(-s*r+i*o)*d,t[6]=p*d,t[7]=(-c*r+n*u)*d,t[8]=(a*r-n*o)*d,t):null},f.adjoint=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8];return t[0]=a*l-s*c,t[1]=i*c-n*l,t[2]=n*s-i*a,t[3]=s*u-o*l,t[4]=r*l-i*u,t[5]=i*o-r*s,t[6]=o*c-a*u,t[7]=n*u-r*c,t[8]=r*a-n*o,t},f.determinant=function(t){var e=t[0],r=t[1],n=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8];return e*(c*o-a*u)+r*(-c*i+a*s)+n*(u*i-o*s)},f.multiply=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=r[0],p=r[1],d=r[2],v=r[3],g=r[4],m=r[5],y=r[6],b=r[7],w=r[8];return t[0]=h*n+p*a+d*c,t[1]=h*i+p*s+d*l,t[2]=h*o+p*u+d*f,t[3]=v*n+g*a+m*c,t[4]=v*i+g*s+m*l,t[5]=v*o+g*u+m*f,t[6]=y*n+b*a+w*c,t[7]=y*i+b*s+w*l,t[8]=y*o+b*u+w*f,t},f.mul=f.multiply,f.translate=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=r[0],p=r[1];return t[0]=n,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=h*n+p*a+c,t[7]=h*i+p*s+l,t[8]=h*o+p*u+f,t},f.rotate=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=Math.sin(r),p=Math.cos(r);return t[0]=p*n+h*a,t[1]=p*i+h*s,t[2]=p*o+h*u,t[3]=p*a-h*n,t[4]=p*s-h*i,t[5]=p*u-h*o,t[6]=c,t[7]=l,t[8]=f,t},f.scale=function(t,e,r){var n=r[0],i=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},f.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},f.fromQuat=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r+r,s=n+n,u=i+i,c=r*a,l=n*a,f=n*s,h=i*a,p=i*s,d=i*u,v=o*a,g=o*s,m=o*u;return t[0]=1-f-d,t[3]=l-m,t[6]=h+g,t[1]=l+m,t[4]=1-c-d,t[7]=p-v,t[2]=h-g,t[5]=p+v,t[8]=1-c-f,t},f.normalFromMat4=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],h=e[10],p=e[11],d=e[12],v=e[13],g=e[14],m=e[15],y=r*s-n*a,b=r*u-i*a,w=r*c-o*a,_=n*u-i*s,A=n*c-o*s,M=i*c-o*u,E=l*v-f*d,x=l*g-h*d,j=l*m-p*d,k=f*g-h*v,I=f*m-p*v,L=h*m-p*g,S=y*L-b*I+w*k+_*j-A*x+M*E;return S?(S=1/S,t[0]=(s*L-u*I+c*k)*S,t[1]=(u*j-a*L-c*x)*S,t[2]=(a*I-s*j+c*E)*S,t[3]=(i*I-n*L-o*k)*S,t[4]=(r*L-i*j+o*x)*S,t[5]=(n*j-r*I-o*E)*S,t[6]=(v*M-g*A+m*_)*S,t[7]=(g*w-d*M-m*b)*S,t[8]=(d*A-v*w+m*y)*S,t):null},f.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},f.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},"undefined"!=typeof t&&(t.mat3=f);var h={};h.create=function(){var t=new r(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},h.clone=function(t){var e=new r(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},h.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},h.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},h.transpose=function(t,e){if(t===e){var r=e[1],n=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},h.invert=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],h=e[10],p=e[11],d=e[12],v=e[13],g=e[14],m=e[15],y=r*s-n*a,b=r*u-i*a,w=r*c-o*a,_=n*u-i*s,A=n*c-o*s,M=i*c-o*u,E=l*v-f*d,x=l*g-h*d,j=l*m-p*d,k=f*g-h*v,I=f*m-p*v,L=h*m-p*g,S=y*L-b*I+w*k+_*j-A*x+M*E;return S?(S=1/S,t[0]=(s*L-u*I+c*k)*S,t[1]=(i*I-n*L-o*k)*S,t[2]=(v*M-g*A+m*_)*S,t[3]=(h*A-f*M-p*_)*S,t[4]=(u*j-a*L-c*x)*S,t[5]=(r*L-i*j+o*x)*S,t[6]=(g*w-d*M-m*b)*S,t[7]=(l*M-h*w+p*b)*S,t[8]=(a*I-s*j+c*E)*S,t[9]=(n*j-r*I-o*E)*S,t[10]=(d*A-v*w+m*y)*S,t[11]=(f*w-l*A-p*y)*S,t[12]=(s*x-a*k-u*E)*S,t[13]=(r*k-n*x+i*E)*S,t[14]=(v*b-d*_-g*y)*S,t[15]=(l*_-f*b+h*y)*S,t):null},h.adjoint=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],h=e[10],p=e[11],d=e[12],v=e[13],g=e[14],m=e[15];return t[0]=s*(h*m-p*g)-f*(u*m-c*g)+v*(u*p-c*h),t[1]=-(n*(h*m-p*g)-f*(i*m-o*g)+v*(i*p-o*h)),t[2]=n*(u*m-c*g)-s*(i*m-o*g)+v*(i*c-o*u),t[3]=-(n*(u*p-c*h)-s*(i*p-o*h)+f*(i*c-o*u)),t[4]=-(a*(h*m-p*g)-l*(u*m-c*g)+d*(u*p-c*h)),t[5]=r*(h*m-p*g)-l*(i*m-o*g)+d*(i*p-o*h),t[6]=-(r*(u*m-c*g)-a*(i*m-o*g)+d*(i*c-o*u)),t[7]=r*(u*p-c*h)-a*(i*p-o*h)+l*(i*c-o*u),t[8]=a*(f*m-p*v)-l*(s*m-c*v)+d*(s*p-c*f),t[9]=-(r*(f*m-p*v)-l*(n*m-o*v)+d*(n*p-o*f)),t[10]=r*(s*m-c*v)-a*(n*m-o*v)+d*(n*c-o*s),t[11]=-(r*(s*p-c*f)-a*(n*p-o*f)+l*(n*c-o*s)),t[12]=-(a*(f*g-h*v)-l*(s*g-u*v)+d*(s*h-u*f)),t[13]=r*(f*g-h*v)-l*(n*g-i*v)+d*(n*h-i*f),t[14]=-(r*(s*g-u*v)-a*(n*g-i*v)+d*(n*u-i*s)),t[15]=r*(s*h-u*f)-a*(n*h-i*f)+l*(n*u-i*s),t},h.determinant=function(t){var e=t[0],r=t[1],n=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],l=t[9],f=t[10],h=t[11],p=t[12],d=t[13],v=t[14],g=t[15],m=e*a-r*o,y=e*s-n*o,b=e*u-i*o,w=r*s-n*a,_=r*u-i*a,A=n*u-i*s,M=c*d-l*p,E=c*v-f*p,x=c*g-h*p,j=l*v-f*d,k=l*g-h*d,I=f*g-h*v;return m*I-y*k+b*j+w*x-_*E+A*M},h.multiply=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=e[9],p=e[10],d=e[11],v=e[12],g=e[13],m=e[14],y=e[15],b=r[0],w=r[1],_=r[2],A=r[3];return t[0]=b*n+w*s+_*f+A*v,t[1]=b*i+w*u+_*h+A*g,t[2]=b*o+w*c+_*p+A*m,t[3]=b*a+w*l+_*d+A*y,b=r[4],w=r[5],_=r[6],A=r[7],t[4]=b*n+w*s+_*f+A*v,t[5]=b*i+w*u+_*h+A*g,t[6]=b*o+w*c+_*p+A*m,t[7]=b*a+w*l+_*d+A*y,b=r[8],w=r[9],_=r[10],A=r[11],t[8]=b*n+w*s+_*f+A*v,t[9]=b*i+w*u+_*h+A*g,t[10]=b*o+w*c+_*p+A*m,t[11]=b*a+w*l+_*d+A*y,b=r[12],w=r[13],_=r[14],A=r[15],t[12]=b*n+w*s+_*f+A*v,t[13]=b*i+w*u+_*h+A*g,t[14]=b*o+w*c+_*p+A*m,t[15]=b*a+w*l+_*d+A*y,t},h.mul=h.multiply,h.translate=function(t,e,r){var n,i,o,a,s,u,c,l,f,h,p,d,v=r[0],g=r[1],m=r[2];return e===t?(t[12]=e[0]*v+e[4]*g+e[8]*m+e[12],t[13]=e[1]*v+e[5]*g+e[9]*m+e[13],t[14]=e[2]*v+e[6]*g+e[10]*m+e[14],t[15]=e[3]*v+e[7]*g+e[11]*m+e[15]):(n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=e[9],p=e[10],d=e[11],t[0]=n,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=c,t[7]=l,t[8]=f,t[9]=h,t[10]=p,t[11]=d,t[12]=n*v+s*g+f*m+e[12],t[13]=i*v+u*g+h*m+e[13],t[14]=o*v+c*g+p*m+e[14],t[15]=a*v+l*g+d*m+e[15]),t},h.scale=function(t,e,r){var n=r[0],i=r[1],o=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},h.rotate=function(t,r,n,i){var o,a,s,u,c,l,f,h,p,d,v,g,m,y,b,w,_,A,M,E,x,j,k,I,L=i[0],S=i[1],T=i[2],B=Math.sqrt(L*L+S*S+T*T);return Math.abs(B)<e?null:(B=1/B,L*=B,S*=B,T*=B,o=Math.sin(n),a=Math.cos(n),s=1-a,u=r[0],c=r[1],l=r[2],f=r[3],h=r[4],p=r[5],d=r[6],v=r[7],g=r[8],m=r[9],y=r[10],b=r[11],w=L*L*s+a,_=S*L*s+T*o,A=T*L*s-S*o,M=L*S*s-T*o,E=S*S*s+a,x=T*S*s+L*o,j=L*T*s+S*o,k=S*T*s-L*o,I=T*T*s+a,t[0]=u*w+h*_+g*A,t[1]=c*w+p*_+m*A,t[2]=l*w+d*_+y*A,t[3]=f*w+v*_+b*A,t[4]=u*M+h*E+g*x,t[5]=c*M+p*E+m*x,t[6]=l*M+d*E+y*x,t[7]=f*M+v*E+b*x,t[8]=u*j+h*k+g*I,t[9]=c*j+p*k+m*I,t[10]=l*j+d*k+y*I,t[11]=f*j+v*k+b*I,r!==t&&(t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t)},h.rotateX=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],l=e[9],f=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+c*n,t[5]=a*i+l*n,t[6]=s*i+f*n,t[7]=u*i+h*n,t[8]=c*i-o*n,t[9]=l*i-a*n,t[10]=f*i-s*n,t[11]=h*i-u*n,t},h.rotateY=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[0],a=e[1],s=e[2],u=e[3],c=e[8],l=e[9],f=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-c*n,t[1]=a*i-l*n,t[2]=s*i-f*n,t[3]=u*i-h*n,t[8]=o*n+c*i,t[9]=a*n+l*i,t[10]=s*n+f*i,t[11]=u*n+h*i,t},h.rotateZ=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[0],a=e[1],s=e[2],u=e[3],c=e[4],l=e[5],f=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+c*n,t[1]=a*i+l*n,t[2]=s*i+f*n,t[3]=u*i+h*n,t[4]=c*i-o*n,t[5]=l*i-a*n,t[6]=f*i-s*n,t[7]=h*i-u*n,t},h.fromRotationTranslation=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=n+n,u=i+i,c=o+o,l=n*s,f=n*u,h=n*c,p=i*u,d=i*c,v=o*c,g=a*s,m=a*u,y=a*c;return t[0]=1-(p+v),t[1]=f+y,t[2]=h-m,t[3]=0,t[4]=f-y,t[5]=1-(l+v),t[6]=d+g,t[7]=0,t[8]=h+m,t[9]=d-g,t[10]=1-(l+p),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},h.fromQuat=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r+r,s=n+n,u=i+i,c=r*a,l=n*a,f=n*s,h=i*a,p=i*s,d=i*u,v=o*a,g=o*s,m=o*u;return t[0]=1-f-d,t[1]=l+m,t[2]=h-g,t[3]=0,t[4]=l-m,t[5]=1-c-d,t[6]=p+v,t[7]=0,t[8]=h+g,t[9]=p-v,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},h.frustum=function(t,e,r,n,i,o,a){var s=1/(r-e),u=1/(i-n),c=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(r+e)*s,t[9]=(i+n)*u,t[10]=(a+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*c,t[15]=0,t},h.perspective=function(t,e,r,n,i){var o=1/Math.tan(e/2),a=1/(n-i);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+n)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*n*a,t[15]=0,t},h.ortho=function(t,e,r,n,i,o,a){var s=1/(e-r),u=1/(n-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+r)*s,t[13]=(i+n)*u,t[14]=(a+o)*c,t[15]=1,t},h.lookAt=function(t,r,n,i){var o,a,s,u,c,l,f,p,d,v,g=r[0],m=r[1],y=r[2],b=i[0],w=i[1],_=i[2],A=n[0],M=n[1],E=n[2];return Math.abs(g-A)<e&&Math.abs(m-M)<e&&Math.abs(y-E)<e?h.identity(t):(f=g-A,p=m-M,d=y-E,v=1/Math.sqrt(f*f+p*p+d*d),f*=v,p*=v,d*=v,o=w*d-_*p,a=_*f-b*d,s=b*p-w*f,v=Math.sqrt(o*o+a*a+s*s),v?(v=1/v,o*=v,a*=v,s*=v):(o=0,a=0,s=0),u=p*s-d*a,c=d*o-f*s,l=f*a-p*o,v=Math.sqrt(u*u+c*c+l*l),v?(v=1/v,u*=v,c*=v,l*=v):(u=0,c=0,l=0),t[0]=o,t[1]=u,t[2]=f,t[3]=0,t[4]=a,t[5]=c,t[6]=p,t[7]=0,t[8]=s,t[9]=l,t[10]=d,t[11]=0,t[12]=-(o*g+a*m+s*y),t[13]=-(u*g+c*m+l*y),t[14]=-(f*g+p*m+d*y),t[15]=1,t)},h.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},h.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},"undefined"!=typeof t&&(t.mat4=h);var p={};p.create=function(){var t=new r(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},p.rotationTo=function(){var t=s.create(),e=s.fromValues(1,0,0),r=s.fromValues(0,1,0);return function(n,i,o){var a=s.dot(i,o);return-.999999>a?(s.cross(t,e,i),s.length(t)<1e-6&&s.cross(t,r,i),s.normalize(t,t),p.setAxisAngle(n,t,Math.PI),n):a>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(s.cross(t,i,o),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+a,p.normalize(n,n))}}(),p.setAxes=function(){var t=f.create();return function(e,r,n,i){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-r[0],t[5]=-r[1],t[8]=-r[2],p.normalize(e,p.fromMat3(e,t))}}(),p.clone=u.clone,p.fromValues=u.fromValues,p.copy=u.copy,p.set=u.set,p.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},p.setAxisAngle=function(t,e,r){r=.5*r;var n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t},p.add=u.add,p.multiply=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=r[0],u=r[1],c=r[2],l=r[3];return t[0]=n*l+a*s+i*c-o*u,t[1]=i*l+a*u+o*s-n*c,t[2]=o*l+a*c+n*u-i*s,t[3]=a*l-n*s-i*u-o*c,t},p.mul=p.multiply,p.scale=u.scale,p.rotateX=function(t,e,r){r*=.5;var n=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u+a*s,t[1]=i*u+o*s,t[2]=o*u-i*s,t[3]=a*u-n*s,t},p.rotateY=function(t,e,r){r*=.5;var n=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u-o*s,t[1]=i*u+a*s,t[2]=o*u+n*s,t[3]=a*u-i*s,t},p.rotateZ=function(t,e,r){r*=.5;var n=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u+i*s,t[1]=i*u-n*s,t[2]=o*u+a*s,t[3]=a*u-o*s,t},p.calculateW=function(t,e){var r=e[0],n=e[1],i=e[2];return t[0]=r,t[1]=n,t[2]=i,t[3]=-Math.sqrt(Math.abs(1-r*r-n*n-i*i)),t},p.dot=u.dot,p.lerp=u.lerp,p.slerp=function(t,e,r,n){var i,o,a,s,u,c=e[0],l=e[1],f=e[2],h=e[3],p=r[0],d=r[1],v=r[2],g=r[3];return o=c*p+l*d+f*v+h*g,0>o&&(o=-o,p=-p,d=-d,v=-v,g=-g),1-o>1e-6?(i=Math.acos(o),a=Math.sin(i),s=Math.sin((1-n)*i)/a,u=Math.sin(n*i)/a):(s=1-n,u=n),t[0]=s*c+u*p,t[1]=s*l+u*d,t[2]=s*f+u*v,t[3]=s*h+u*g,t},p.invert=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r*r+n*n+i*i+o*o,s=a?1/a:0;return t[0]=-r*s,t[1]=-n*s,t[2]=-i*s,t[3]=o*s,t},p.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},p.length=u.length,p.len=p.length,p.squaredLength=u.squaredLength,p.sqrLen=p.squaredLength,p.normalize=u.normalize,p.fromMat3=function(t,e){var r,n=e[0]+e[4]+e[8];if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[7]-e[5])*r,t[1]=(e[2]-e[6])*r,t[2]=(e[3]-e[1])*r;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;r=Math.sqrt(e[3*i+i]-e[3*o+o]-e[3*a+a]+1),t[i]=.5*r,r=.5/r,t[3]=(e[3*a+o]-e[3*o+a])*r,t[o]=(e[3*o+i]+e[3*i+o])*r,t[a]=(e[3*a+i]+e[3*i+a])*r}return t},p.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},"undefined"!=typeof t&&(t.quat=p)}(e.exports)}(this)},{}],17:[function(t,e,r){"use strict";function n(t,e,r){this.rotation=t,this.center=e,this.distance=r}function i(t,e){var r=e[0],n=e[1],i=(e[2],r*r+n*n);i>1&&(i=1),t[0]=-e[0],t[1]=e[1],t[2]=e[2]||Math.sqrt(1-i),t[3]=0}function o(t,e,r){t=t||[0,0,-1],e=e||[0,0,0],r=r||[0,1,0];var i=new n(l.create(),s.create(),1);return i.lookAt(t,e,r),i}var a=t("gl-matrix"),s=a.vec3,u=a.mat3,c=a.mat4,l=a.quat,f=new Float32Array(16),h=new Float32Array(16),p=n.prototype;p.view=function(t){return t||(t=c.create()),h[0]=h[1]=0,h[2]=-this.distance,c.fromRotationTranslation(t,l.conjugate(f,this.rotation),h),c.translate(t,t,s.negate(f,this.center)),t},p.lookAt=function(t,e,r){c.lookAt(f,t,e,r),u.fromMat4(f,f),l.fromMat3(this.rotation,f),s.copy(this.center,e),this.distance=s.distance(t,e)},p.pan=function(t){var e=this.distance;f[0]=-e*(t[0]||0),f[1]=e*(t[1]||0),f[2]=e*(t[2]||0),s.transformQuat(f,f,this.rotation),s.add(this.center,this.center,f)},p.zoom=function(t){this.distance+=t,this.distance<0&&(this.distance=0)},p.rotate=function(t,e){i(f,t),i(h,e),l.invert(h,h),l.multiply(f,f,h),l.length(f)<1e-6||(l.multiply(this.rotation,this.rotation,f),l.normalize(this.rotation,this.rotation))},e.exports=o},{"gl-matrix":16}],18:[function(t,e,r){!function(){"use strict";var t={};"undefined"==typeof r?"function"==typeof define&&"object"==typeof define.amd&&define.amd?(t.exports={},define(function(){return t.exports})):t.exports=window:t.exports=r,function(t){if(!e)var e=1e-6;if(!r)var r="undefined"!=typeof Float32Array?Float32Array:Array;var n={};n.setMatrixArrayType=function(t){r=t},"undefined"!=typeof t&&(t.glMatrix=n);var i={};i.create=function(){var t=new r(2);return t[0]=0,t[1]=0,t},i.clone=function(t){var e=new r(2);return e[0]=t[0],e[1]=t[1],e},i.fromValues=function(t,e){var n=new r(2);return n[0]=t,n[1]=e,n},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},i.set=function(t,e,r){return t[0]=e,t[1]=r,t},i.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t},i.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t},i.sub=i.subtract,i.multiply=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t},i.mul=i.multiply,i.divide=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t},i.div=i.divide,i.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t},i.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t},i.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t},i.distance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)},i.dist=i.distance,i.squaredDistance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n},i.sqrDist=i.squaredDistance,i.length=function(t){var e=t[0],r=t[1];return Math.sqrt(e*e+r*r)},i.len=i.length,i.squaredLength=function(t){var e=t[0],r=t[1];return e*e+r*r},i.sqrLen=i.squaredLength,i.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},i.normalize=function(t,e){var r=e[0],n=e[1],i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i),t},i.dot=function(t,e){
return t[0]*e[0]+t[1]*e[1]},i.cross=function(t,e,r){var n=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=n,t},i.lerp=function(t,e,r,n){var i=e[0],o=e[1];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t},i.transformMat2=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i,t[1]=r[1]*n+r[3]*i,t},i.transformMat2d=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i+r[4],t[1]=r[1]*n+r[3]*i+r[5],t},i.transformMat3=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[3]*i+r[6],t[1]=r[1]*n+r[4]*i+r[7],t},i.transformMat4=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[4]*i+r[12],t[1]=r[1]*n+r[5]*i+r[13],t},i.forEach=function(){var t=i.create();return function(e,r,n,i,o,a){var s,u;for(r||(r=2),n||(n=0),u=i?Math.min(i*r+n,e.length):e.length,s=n;u>s;s+=r)t[0]=e[s],t[1]=e[s+1],o(t,t,a),e[s]=t[0],e[s+1]=t[1];return e}}(),i.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},"undefined"!=typeof t&&(t.vec2=i);var o={};o.create=function(){var t=new r(3);return t[0]=0,t[1]=0,t[2]=0,t},o.clone=function(t){var e=new r(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},o.fromValues=function(t,e,n){var i=new r(3);return i[0]=t,i[1]=e,i[2]=n,i},o.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},o.set=function(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t},o.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t},o.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t},o.sub=o.subtract,o.multiply=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t},o.mul=o.multiply,o.divide=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t},o.div=o.divide,o.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t},o.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t},o.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t},o.distance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(r*r+n*n+i*i)},o.dist=o.distance,o.squaredDistance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return r*r+n*n+i*i},o.sqrDist=o.squaredDistance,o.length=function(t){var e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)},o.len=o.length,o.squaredLength=function(t){var e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n},o.sqrLen=o.squaredLength,o.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},o.normalize=function(t,e){var r=e[0],n=e[1],i=e[2],o=r*r+n*n+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t},o.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},o.cross=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=r[0],s=r[1],u=r[2];return t[0]=i*u-o*s,t[1]=o*a-n*u,t[2]=n*s-i*a,t},o.lerp=function(t,e,r,n){var i=e[0],o=e[1],a=e[2];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t[2]=a+n*(r[2]-a),t},o.transformMat4=function(t,e,r){var n=e[0],i=e[1],o=e[2];return t[0]=r[0]*n+r[4]*i+r[8]*o+r[12],t[1]=r[1]*n+r[5]*i+r[9]*o+r[13],t[2]=r[2]*n+r[6]*i+r[10]*o+r[14],t},o.transformQuat=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=r[0],s=r[1],u=r[2],c=r[3],l=c*n+s*o-u*i,f=c*i+u*n-a*o,h=c*o+a*i-s*n,p=-a*n-s*i-u*o;return t[0]=l*c+p*-a+f*-u-h*-s,t[1]=f*c+p*-s+h*-a-l*-u,t[2]=h*c+p*-u+l*-s-f*-a,t},o.forEach=function(){var t=o.create();return function(e,r,n,i,o,a){var s,u;for(r||(r=3),n||(n=0),u=i?Math.min(i*r+n,e.length):e.length,s=n;u>s;s+=r)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}(),o.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},"undefined"!=typeof t&&(t.vec3=o);var a={};a.create=function(){var t=new r(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},a.clone=function(t){var e=new r(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},a.fromValues=function(t,e,n,i){var o=new r(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=i,o},a.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},a.set=function(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t},a.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t},a.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t},a.sub=a.subtract,a.multiply=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t},a.mul=a.multiply,a.divide=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t},a.div=a.divide,a.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t},a.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t},a.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t},a.distance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(r*r+n*n+i*i+o*o)},a.dist=a.distance,a.squaredDistance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return r*r+n*n+i*i+o*o},a.sqrDist=a.squaredDistance,a.length=function(t){var e=t[0],r=t[1],n=t[2],i=t[3];return Math.sqrt(e*e+r*r+n*n+i*i)},a.len=a.length,a.squaredLength=function(t){var e=t[0],r=t[1],n=t[2],i=t[3];return e*e+r*r+n*n+i*i},a.sqrLen=a.squaredLength,a.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},a.normalize=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r*r+n*n+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t[3]=e[3]*a),t},a.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},a.lerp=function(t,e,r,n){var i=e[0],o=e[1],a=e[2],s=e[3];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t[2]=a+n*(r[2]-a),t[3]=s+n*(r[3]-s),t},a.transformMat4=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*a,t[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*a,t[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*a,t[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*a,t},a.transformQuat=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=r[0],s=r[1],u=r[2],c=r[3],l=c*n+s*o-u*i,f=c*i+u*n-a*o,h=c*o+a*i-s*n,p=-a*n-s*i-u*o;return t[0]=l*c+p*-a+f*-u-h*-s,t[1]=f*c+p*-s+h*-a-l*-u,t[2]=h*c+p*-u+l*-s-f*-a,t},a.forEach=function(){var t=a.create();return function(e,r,n,i,o,a){var s,u;for(r||(r=4),n||(n=0),u=i?Math.min(i*r+n,e.length):e.length,s=n;u>s;s+=r)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}(),a.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},"undefined"!=typeof t&&(t.vec4=a);var s={};new Float32Array([1,0,0,1]);s.create=function(){var t=new r(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},s.clone=function(t){var e=new r(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},s.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},s.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},s.transpose=function(t,e){if(t===e){var r=e[1];t[1]=e[2],t[2]=r}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},s.invert=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r*o-i*n;return a?(a=1/a,t[0]=o*a,t[1]=-n*a,t[2]=-i*a,t[3]=r*a,t):null},s.adjoint=function(t,e){var r=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=r,t},s.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},s.multiply=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=r[0],u=r[1],c=r[2],l=r[3];return t[0]=n*s+i*c,t[1]=n*u+i*l,t[2]=o*s+a*c,t[3]=o*u+a*l,t},s.mul=s.multiply,s.rotate=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u+i*s,t[1]=n*-s+i*u,t[2]=o*u+a*s,t[3]=o*-s+a*u,t},s.scale=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=r[0],u=r[1];return t[0]=n*s,t[1]=i*u,t[2]=o*s,t[3]=a*u,t},s.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},"undefined"!=typeof t&&(t.mat2=s);var u={};new Float32Array([1,0,0,1,0,0]);u.create=function(){var t=new r(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},u.clone=function(t){var e=new r(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},u.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},u.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},u.invert=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=r*o-n*i;return u?(u=1/u,t[0]=o*u,t[1]=-n*u,t[2]=-i*u,t[3]=r*u,t[4]=(i*s-o*a)*u,t[5]=(n*a-r*s)*u,t):null},u.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},u.multiply=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=r[0],l=r[1],f=r[2],h=r[3],p=r[4],d=r[5];return t[0]=n*c+i*f,t[1]=n*l+i*h,t[2]=o*c+a*f,t[3]=o*l+a*h,t[4]=c*s+f*u+p,t[5]=l*s+h*u+d,t},u.mul=u.multiply,u.rotate=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=Math.sin(r),l=Math.cos(r);return t[0]=n*l+i*c,t[1]=-n*c+i*l,t[2]=o*l+a*c,t[3]=-o*c+l*a,t[4]=l*s+c*u,t[5]=l*u-c*s,t},u.scale=function(t,e,r){var n=r[0],i=r[1];return t[0]=e[0]*n,t[1]=e[1]*i,t[2]=e[2]*n,t[3]=e[3]*i,t[4]=e[4]*n,t[5]=e[5]*i,t},u.translate=function(t,e,r){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+r[0],t[5]=e[5]+r[1],t},u.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},"undefined"!=typeof t&&(t.mat2d=u);var c={};new Float32Array([1,0,0,0,1,0,0,0,1]);c.create=function(){var t=new r(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},c.clone=function(t){var e=new r(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},c.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},c.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},c.transpose=function(t,e){if(t===e){var r=e[1],n=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},c.invert=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=l*a-s*c,h=-l*o+s*u,p=c*o-a*u,d=r*f+n*h+i*p;return d?(d=1/d,t[0]=f*d,t[1]=(-l*n+i*c)*d,t[2]=(s*n-i*a)*d,t[3]=h*d,t[4]=(l*r-i*u)*d,t[5]=(-s*r+i*o)*d,t[6]=p*d,t[7]=(-c*r+n*u)*d,t[8]=(a*r-n*o)*d,t):null},c.adjoint=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8];return t[0]=a*l-s*c,t[1]=i*c-n*l,t[2]=n*s-i*a,t[3]=s*u-o*l,t[4]=r*l-i*u,t[5]=i*o-r*s,t[6]=o*c-a*u,t[7]=n*u-r*c,t[8]=r*a-n*o,t},c.determinant=function(t){var e=t[0],r=t[1],n=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8];return e*(c*o-a*u)+r*(-c*i+a*s)+n*(u*i-o*s)},c.multiply=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=r[0],p=r[1],d=r[2],v=r[3],g=r[4],m=r[5],y=r[6],b=r[7],w=r[8];return t[0]=h*n+p*a+d*c,t[1]=h*i+p*s+d*l,t[2]=h*o+p*u+d*f,t[3]=v*n+g*a+m*c,t[4]=v*i+g*s+m*l,t[5]=v*o+g*u+m*f,t[6]=y*n+b*a+w*c,t[7]=y*i+b*s+w*l,t[8]=y*o+b*u+w*f,t},c.mul=c.multiply,c.translate=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=r[0],p=r[1];return t[0]=n,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=h*n+p*a+c,t[7]=h*i+p*s+l,t[8]=h*o+p*u+f,t},c.rotate=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=Math.sin(r),p=Math.cos(r);return t[0]=p*n+h*a,t[1]=p*i+h*s,t[2]=p*o+h*u,t[3]=p*a-h*n,t[4]=p*s-h*i,t[5]=p*u-h*o,t[6]=c,t[7]=l,t[8]=f,t},c.scale=function(t,e,r){var n=r[0],i=r[2];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},c.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},c.fromQuat=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r+r,s=n+n,u=i+i,c=r*a,l=r*s,f=r*u,h=n*s,p=n*u,d=i*u,v=o*a,g=o*s,m=o*u;return t[0]=1-(h+d),t[1]=l+m,t[2]=f-g,t[3]=l-m,t[4]=1-(c+d),t[5]=p+v,t[6]=f+g,t[7]=p-v,t[8]=1-(c+h),t},c.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},"undefined"!=typeof t&&(t.mat3=c);var l={};new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);l.create=function(){var t=new r(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},l.clone=function(t){var e=new r(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},l.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},l.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},l.transpose=function(t,e){if(t===e){var r=e[1],n=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},l.invert=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],h=e[10],p=e[11],d=e[12],v=e[13],g=e[14],m=e[15],y=r*s-n*a,b=r*u-i*a,w=r*c-o*a,_=n*u-i*s,A=n*c-o*s,M=i*c-o*u,E=l*v-f*d,x=l*g-h*d,j=l*m-p*d,k=f*g-h*v,I=f*m-p*v,L=h*m-p*g,S=y*L-b*I+w*k+_*j-A*x+M*E;return S?(S=1/S,t[0]=(s*L-u*I+c*k)*S,t[1]=(i*I-n*L-o*k)*S,t[2]=(v*M-g*A+m*_)*S,t[3]=(h*A-f*M-p*_)*S,t[4]=(u*j-a*L-c*x)*S,t[5]=(r*L-i*j+o*x)*S,t[6]=(g*w-d*M-m*b)*S,t[7]=(l*M-h*w+p*b)*S,t[8]=(a*I-s*j+c*E)*S,t[9]=(n*j-r*I-o*E)*S,t[10]=(d*A-v*w+m*y)*S,t[11]=(f*w-l*A-p*y)*S,t[12]=(s*x-a*k-u*E)*S,t[13]=(r*k-n*x+i*E)*S,t[14]=(v*b-d*_-g*y)*S,t[15]=(l*_-f*b+h*y)*S,t):null},l.adjoint=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],h=e[10],p=e[11],d=e[12],v=e[13],g=e[14],m=e[15];return t[0]=s*(h*m-p*g)-f*(u*m-c*g)+v*(u*p-c*h),t[1]=-(n*(h*m-p*g)-f*(i*m-o*g)+v*(i*p-o*h)),t[2]=n*(u*m-c*g)-s*(i*m-o*g)+v*(i*c-o*u),t[3]=-(n*(u*p-c*h)-s*(i*p-o*h)+f*(i*c-o*u)),t[4]=-(a*(h*m-p*g)-l*(u*m-c*g)+d*(u*p-c*h)),t[5]=r*(h*m-p*g)-l*(i*m-o*g)+d*(i*p-o*h),t[6]=-(r*(u*m-c*g)-a*(i*m-o*g)+d*(i*c-o*u)),t[7]=r*(u*p-c*h)-a*(i*p-o*h)+l*(i*c-o*u),t[8]=a*(f*m-p*v)-l*(s*m-c*v)+d*(s*p-c*f),t[9]=-(r*(f*m-p*v)-l*(n*m-o*v)+d*(n*p-o*f)),t[10]=r*(s*m-c*v)-a*(n*m-o*v)+d*(n*c-o*s),t[11]=-(r*(s*p-c*f)-a*(n*p-o*f)+l*(n*c-o*s)),t[12]=-(a*(f*g-h*v)-l*(s*g-u*v)+d*(s*h-u*f)),t[13]=r*(f*g-h*v)-l*(n*g-i*v)+d*(n*h-i*f),t[14]=-(r*(s*g-u*v)-a*(n*g-i*v)+d*(n*u-i*s)),t[15]=r*(s*h-u*f)-a*(n*h-i*f)+l*(n*u-i*s),t},l.determinant=function(t){var e=t[0],r=t[1],n=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],l=t[9],f=t[10],h=t[11],p=t[12],d=t[13],v=t[14],g=t[15],m=e*a-r*o,y=e*s-n*o,b=e*u-i*o,w=r*s-n*a,_=r*u-i*a,A=n*u-i*s,M=c*d-l*p,E=c*v-f*p,x=c*g-h*p,j=l*v-f*d,k=l*g-h*d,I=f*g-h*v;return m*I-y*k+b*j+w*x-_*E+A*M},l.multiply=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=e[9],p=e[10],d=e[11],v=e[12],g=e[13],m=e[14],y=e[15],b=r[0],w=r[1],_=r[2],A=r[3];return t[0]=b*n+w*s+_*f+A*v,t[1]=b*i+w*u+_*h+A*g,t[2]=b*o+w*c+_*p+A*m,t[3]=b*a+w*l+_*d+A*y,b=r[4],w=r[5],_=r[6],A=r[7],t[4]=b*n+w*s+_*f+A*v,t[5]=b*i+w*u+_*h+A*g,t[6]=b*o+w*c+_*p+A*m,t[7]=b*a+w*l+_*d+A*y,b=r[8],w=r[9],_=r[10],A=r[11],t[8]=b*n+w*s+_*f+A*v,t[9]=b*i+w*u+_*h+A*g,t[10]=b*o+w*c+_*p+A*m,t[11]=b*a+w*l+_*d+A*y,b=r[12],w=r[13],_=r[14],A=r[15],t[12]=b*n+w*s+_*f+A*v,t[13]=b*i+w*u+_*h+A*g,t[14]=b*o+w*c+_*p+A*m,t[15]=b*a+w*l+_*d+A*y,t},l.mul=l.multiply,l.translate=function(t,e,r){var n,i,o,a,s,u,c,l,f,h,p,d,v=r[0],g=r[1],m=r[2];return e===t?(t[12]=e[0]*v+e[4]*g+e[8]*m+e[12],t[13]=e[1]*v+e[5]*g+e[9]*m+e[13],t[14]=e[2]*v+e[6]*g+e[10]*m+e[14],t[15]=e[3]*v+e[7]*g+e[11]*m+e[15]):(n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=e[9],p=e[10],d=e[11],t[0]=n,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=c,t[7]=l,t[8]=f,t[9]=h,t[10]=p,t[11]=d,t[12]=n*v+s*g+f*m+e[12],t[13]=i*v+u*g+h*m+e[13],t[14]=o*v+c*g+p*m+e[14],t[15]=a*v+l*g+d*m+e[15]),t},l.scale=function(t,e,r){var n=r[0],i=r[1],o=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},l.rotate=function(t,r,n,i){var o,a,s,u,c,l,f,h,p,d,v,g,m,y,b,w,_,A,M,E,x,j,k,I,L=i[0],S=i[1],T=i[2],B=Math.sqrt(L*L+S*S+T*T);return Math.abs(B)<e?null:(B=1/B,L*=B,S*=B,T*=B,o=Math.sin(n),a=Math.cos(n),s=1-a,u=r[0],c=r[1],l=r[2],f=r[3],h=r[4],p=r[5],d=r[6],v=r[7],g=r[8],m=r[9],y=r[10],b=r[11],w=L*L*s+a,_=S*L*s+T*o,A=T*L*s-S*o,M=L*S*s-T*o,E=S*S*s+a,x=T*S*s+L*o,j=L*T*s+S*o,k=S*T*s-L*o,I=T*T*s+a,t[0]=u*w+h*_+g*A,t[1]=c*w+p*_+m*A,t[2]=l*w+d*_+y*A,t[3]=f*w+v*_+b*A,t[4]=u*M+h*E+g*x,t[5]=c*M+p*E+m*x,t[6]=l*M+d*E+y*x,t[7]=f*M+v*E+b*x,t[8]=u*j+h*k+g*I,t[9]=c*j+p*k+m*I,t[10]=l*j+d*k+y*I,t[11]=f*j+v*k+b*I,r!==t&&(t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15]),t)},l.rotateX=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],l=e[9],f=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+c*n,t[5]=a*i+l*n,t[6]=s*i+f*n,t[7]=u*i+h*n,t[8]=c*i-o*n,t[9]=l*i-a*n,t[10]=f*i-s*n,t[11]=h*i-u*n,t},l.rotateY=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[0],a=e[1],s=e[2],u=e[3],c=e[8],l=e[9],f=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-c*n,t[1]=a*i-l*n,t[2]=s*i-f*n,t[3]=u*i-h*n,t[8]=o*n+c*i,t[9]=a*n+l*i,t[10]=s*n+f*i,t[11]=u*n+h*i,t},l.rotateZ=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[0],a=e[1],s=e[2],u=e[3],c=e[4],l=e[5],f=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+c*n,t[1]=a*i+l*n,t[2]=s*i+f*n,t[3]=u*i+h*n,t[4]=c*i-o*n,t[5]=l*i-a*n,t[6]=f*i-s*n,t[7]=h*i-u*n,t},l.fromRotationTranslation=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=n+n,u=i+i,c=o+o,l=n*s,f=n*u,h=n*c,p=i*u,d=i*c,v=o*c,g=a*s,m=a*u,y=a*c;return t[0]=1-(p+v),t[1]=f+y,t[2]=h-m,t[3]=0,t[4]=f-y,t[5]=1-(l+v),t[6]=d+g,t[7]=0,t[8]=h+m,t[9]=d-g,t[10]=1-(l+p),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t},l.fromQuat=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r+r,s=n+n,u=i+i,c=r*a,l=r*s,f=r*u,h=n*s,p=n*u,d=i*u,v=o*a,g=o*s,m=o*u;return t[0]=1-(h+d),t[1]=l+m,t[2]=f-g,t[3]=0,t[4]=l-m,t[5]=1-(c+d),t[6]=p+v,t[7]=0,t[8]=f+g,t[9]=p-v,t[10]=1-(c+h),t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},l.frustum=function(t,e,r,n,i,o,a){var s=1/(r-e),u=1/(i-n),c=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(r+e)*s,t[9]=(i+n)*u,t[10]=(a+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*c,t[15]=0,t},l.perspective=function(t,e,r,n,i){var o=1/Math.tan(e/2),a=1/(n-i);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+n)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*n*a,t[15]=0,t},l.ortho=function(t,e,r,n,i,o,a){var s=1/(e-r),u=1/(n-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+r)*s,t[13]=(i+n)*u,t[14]=(a+o)*c,t[15]=1,t},l.lookAt=function(t,r,n,i){var o,a,s,u,c,f,h,p,d,v,g=r[0],m=r[1],y=r[2],b=i[0],w=i[1],_=i[2],A=n[0],M=n[1],E=n[2];return Math.abs(g-A)<e&&Math.abs(m-M)<e&&Math.abs(y-E)<e?l.identity(t):(h=g-A,p=m-M,d=y-E,v=1/Math.sqrt(h*h+p*p+d*d),h*=v,p*=v,d*=v,o=w*d-_*p,a=_*h-b*d,s=b*p-w*h,v=Math.sqrt(o*o+a*a+s*s),v?(v=1/v,o*=v,a*=v,s*=v):(o=0,a=0,s=0),u=p*s-d*a,c=d*o-h*s,f=h*a-p*o,v=Math.sqrt(u*u+c*c+f*f),v?(v=1/v,u*=v,c*=v,f*=v):(u=0,c=0,f=0),t[0]=o,t[1]=u,t[2]=h,t[3]=0,t[4]=a,t[5]=c,t[6]=p,t[7]=0,t[8]=s,t[9]=f,t[10]=d,t[11]=0,t[12]=-(o*g+a*m+s*y),t[13]=-(u*g+c*m+f*y),t[14]=-(h*g+p*m+d*y),t[15]=1,t)},l.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},"undefined"!=typeof t&&(t.mat4=l);var f={};new Float32Array([0,0,0,1]);f.create=function(){var t=new r(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},f.clone=a.clone,f.fromValues=a.fromValues,f.copy=a.copy,f.set=a.set,f.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},f.setAxisAngle=function(t,e,r){r=.5*r;var n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t},f.add=a.add,f.multiply=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=r[0],u=r[1],c=r[2],l=r[3];return t[0]=n*l+a*s+i*c-o*u,t[1]=i*l+a*u+o*s-n*c,t[2]=o*l+a*c+n*u-i*s,t[3]=a*l-n*s-i*u-o*c,t},f.mul=f.multiply,f.scale=a.scale,f.rotateX=function(t,e,r){r*=.5;var n=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u+a*s,t[1]=i*u+o*s,t[2]=o*u-i*s,t[3]=a*u-n*s,t},f.rotateY=function(t,e,r){r*=.5;var n=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u-o*s,t[1]=i*u+a*s,t[2]=o*u+n*s,t[3]=a*u-i*s,t},f.rotateZ=function(t,e,r){r*=.5;var n=e[0],i=e[1],o=e[2],a=e[3],s=Math.sin(r),u=Math.cos(r);return t[0]=n*u+i*s,t[1]=i*u-n*s,t[2]=o*u+a*s,t[3]=a*u-o*s,t},f.calculateW=function(t,e){var r=e[0],n=e[1],i=e[2];return t[0]=r,t[1]=n,t[2]=i,t[3]=-Math.sqrt(Math.abs(1-r*r-n*n-i*i)),t},f.dot=a.dot,f.lerp=a.lerp,f.slerp=function(t,e,r,n){var i,o,a,s,u=e[0],c=e[1],l=e[2],f=e[3],h=r[0],p=r[1],d=r[2],v=r[3],g=u*h+c*p+l*d+f*v;return Math.abs(g)>=1?(t!==e&&(t[0]=u,t[1]=c,t[2]=l,t[3]=f),t):(i=Math.acos(g),o=Math.sqrt(1-g*g),Math.abs(o)<.001?(t[0]=.5*u+.5*h,t[1]=.5*c+.5*p,t[2]=.5*l+.5*d,t[3]=.5*f+.5*v,t):(a=Math.sin((1-n)*i)/o,s=Math.sin(n*i)/o,t[0]=u*a+h*s,t[1]=c*a+p*s,t[2]=l*a+d*s,t[3]=f*a+v*s,t))},f.invert=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r*r+n*n+i*i+o*o,s=a?1/a:0;return t[0]=-r*s,t[1]=-n*s,t[2]=-i*s,t[3]=o*s,t},f.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},f.length=a.length,f.len=f.length,f.squaredLength=a.squaredLength,f.sqrLen=f.squaredLength,f.normalize=a.normalize,f.fromMat3=function(){var t=[1,2,0];return function(e,r){var n,i=r[0]+r[4]+r[8];if(i>0)n=Math.sqrt(i+1),e[3]=.5*n,n=.5/n,e[0]=(r[7]-r[5])*n,e[1]=(r[2]-r[6])*n,e[2]=(r[3]-r[1])*n;else{var o=0;r[4]>r[0]&&(o=1),r[8]>r[3*o+o]&&(o=2);var a=t[o],s=t[a];n=Math.sqrt(r[3*o+o]-r[3*a+a]-r[3*s+s]+1),e[o]=.5*n,n=.5/n,e[3]=(r[3*s+a]-r[3*a+s])*n,e[a]=(r[3*a+o]+r[3*o+a])*n,e[s]=(r[3*s+o]+r[3*o+s])*n}return e}}(),f.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},"undefined"!=typeof t&&(t.quat=f)}(t.exports)}()},{}],19:[function(t,e,r){"use strict";function n(t){function e(){var t=n._width/a|0,e=n._height/a|0;n.canvas.width=t,n.canvas.height=e,n.canvas.style.width=n._width+"px",n.canvas.style.height=n._height+"px",n.emit("gl-resize",t,e)}t=t||{};var r=t.extensions||[],n=i(t),a=n.scale||1,s=t.glOptions;return n.on("init",function(){var i=document.createElement("canvas"),u=i.getContext("webgl",s)||i.getContext("experimental-webgl",s);if(!u)return void n.emit("gl-error",new Error("Unable to initialize WebGL"));for(var c=o(u),l=0;l<r.length;++l)if(!(r[l]in c))return void n.emit("gl-error",new Error("Missing extension: "+r[l]));i.style.position="absolute",i.style.left="0px",i.style.top="0px",n.element.appendChild(i),n.canvas=i,n.gl=u,e(),n.clearFlags=void 0===t.clearFlags?u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT:t.clearFlags,n.clearColor=t.clearColor||[0,0,0,0],n.clearDepth=t.clearDepth||1,n.clearStencil=t.clearStencil||0,n.on("resize",e),n.on("render",function(t){u.bindFramebuffer(u.FRAMEBUFFER,null),u.viewport(0,0,n._width/a|0,n._height/a|0),n.clearFlags&u.STENCIL_BUFFER_BIT&&u.clearStencil(n.clearStencil),n.clearFlags&u.COLOR_BUFFER_BIT&&u.clearColor(n.clearColor[0],n.clearColor[1],n.clearColor[2],n.clearColor[3]),n.clearFlags&u.DEPTH_BUFFER_BIT&&u.clearDepth(n.clearDepth),n.clearFlags&&u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT|u.STENCIL_BUFFER_BIT),n.emit("gl-render",t)}),n.emit("gl-init")}),Object.defineProperty(n,"scale",{get:function(){return a},set:function(t){return t=+t,0>=t||isNaN(t)||a===t?a:(a=t,e(),a)}}),Object.defineProperty(n,"width",{get:function(){return n._width/a|0}}),Object.defineProperty(n,"height",{get:function(){return n._height/a|0}}),Object.defineProperty(n,"mouse",{get:function(){return[n.mouseX/a,n.mouseY/a]}}),Object.defineProperty(n,"prevMouse",{get:function(){return[n.prevMouseX/a,n.prevMouseY/a]}}),n}var i=t("game-shell"),o=t("webglew");e.exports=n},{"game-shell":29,webglew:31}],20:[function(t,e,r){"object"==typeof window.performance?window.performance.now?e.exports=function(){return window.performance.now()}:window.performance.webkitNow&&(e.exports=function(){return window.performance.webkitNow()}):Date.now?e.exports=Date.now:e.exports=function(){return(new Date).getTime()}},{}],21:[function(t,e,r){function n(t,e,r,n){t[i](a+e,"wheel"==o?r:function(t){!t&&(t=window.event);var e={originalEvent:t,target:t.target||t.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==t.type?0:1,deltaX:0,delatZ:0,preventDefault:function(){t.preventDefault?t.preventDefault():t.returnValue=!1}};return"mousewheel"==o?(e.deltaY=-1/40*t.wheelDelta,t.wheelDeltaX&&(e.deltaX=-1/40*t.wheelDeltaX)):e.deltaY=t.detail,r(e)},n||!1)}var i,o,a="";window.addEventListener?i="addEventListener":(i="attachEvent",a="on"),o="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",e.exports=function(t,e,r){n(t,o,e,r),"DOMMouseScroll"==o&&n(t,"MozMousePixelScroll",e,r)}},{}],22:[function(t,e,r){for(var n=0,i=["ms","moz","webkit","o"],o=0;o<i.length&&!window.requestAnimationFrame;++o)window.requestAnimationFrame=window[i[o]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[i[o]+"CancelAnimationFrame"]||window[i[o]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,e){var r=(new Date).getTime(),i=Math.max(0,16-(r-n)),o=window.setTimeout(function(){t(r+i)},i);return n=r+i,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})},{}],23:[function(t,e,r){"use strict";function n(t,e,r,n,i,o){var a=["function ",t,"(a,l,h,",n.join(","),"){",o?"":"var i=",r?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",i?".get(m)":"[m]"];return o?a.push(e.indexOf("c")<0?";if(x===y){return m}else if(x<=y){":";var p=c(x,y);if(p===0){return m}else if(p<=0){"):a.push(";if(",e,"){i=m;"),a.push(r?"l=m+1}else{h=m-1}":"h=m-1}else{l=m+1}"),a.push("}"),a.push(o?"return -1};":"return i};"),a.join("")}function i(t,e,r,i){var o=new Function([n("A","x"+t+"y",e,["y"],!1,i),n("B","x"+t+"y",e,["y"],!0,i),n("P","c(x,y)"+t+"0",e,["y","c"],!1,i),n("Q","c(x,y)"+t+"0",e,["y","c"],!0,i),"function dispatchBsearch",r,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",r].join(""));return o()}e.exports={ge:i(">=",!1,"GE"),gt:i(">",!1,"GT"),lt:i("<",!0,"LT"),le:i("<=",!0,"LE"),eq:i("-",!0,"EQ",!0)}},{}],24:[function(t,e,r){!function(t,r){"undefined"!=typeof e?e.exports=r():"function"==typeof define&&"object"==typeof define.amd?define(r):this[t]=r()}("domready",function(){var t,e=[],r=document,n=r.documentElement.doScroll,i="DOMContentLoaded",o=(n?/^loaded|^c/:/^loaded|^i|^c/).test(r.readyState);return o||r.addEventListener(i,t=function(){for(r.removeEventListener(i,t),o=1;t=e.shift();)t()}),function(t){o?setTimeout(t,0):e.push(t)}})},{}],25:[function(t,e,r){"use strict";function n(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[t[r]]=r);return e}e.exports=n},{}],26:[function(t,e,r){"use strict";function n(t){for(var e=new Array(t),r=0;t>r;++r)e[r]=r;return e}e.exports=n},{}],27:[function(t,e,r){"use strict";function n(t,e){for(var r=1,n=t.length,i=t[0],o=t[0],a=1;n>a;++a)if(o=i,i=t[a],e(i,o)){if(a===r){r++;continue}t[r++]=i}return t.length=r,t}function i(t){for(var e=1,r=t.length,n=t[0],i=t[0],o=1;r>o;++o,i=n)if(i=n,n=t[o],n!==i){if(o===e){e++;continue}t[e++]=n}return t.length=e,t}function o(t,e,r){return 0===t.length?t:e?(r||t.sort(e),n(t,e)):(r||t.sort(),i(t))}e.exports=o},{}],28:[function(t,e,r){var n,i="undefined"!=typeof window?window.navigator.userAgent:"",o=/OS X/.test(i),a=/Opera/.test(i),s=!/like Gecko/.test(i)&&!a,u=e.exports={0:o?"<menu>":"<UNK>",1:"<mouse 1>",2:"<mouse 2>",3:"<break>",4:"<mouse 3>",5:"<mouse 4>",6:"<mouse 5>",8:"<backspace>",9:"<tab>",12:"<clear>",13:"<enter>",16:"<shift>",17:"<control>",18:"<alt>",19:"<pause>",20:"<caps-lock>",21:"<ime-hangul>",23:"<ime-junja>",24:"<ime-final>",25:"<ime-kanji>",27:"<escape>",28:"<ime-convert>",29:"<ime-nonconvert>",30:"<ime-accept>",31:"<ime-mode-change>",27:"<escape>",32:"<space>",33:"<page-up>",34:"<page-down>",35:"<end>",36:"<home>",37:"<left>",38:"<up>",39:"<right>",40:"<down>",41:"<select>",42:"<print>",43:"<execute>",44:"<snapshot>",45:"<insert>",46:"<delete>",47:"<help>",91:"<meta>",92:"<meta>",93:o?"<meta>":"<menu>",95:"<sleep>",106:"<num-*>",107:"<num-+>",108:"<num-enter>",109:"<num-->",110:"<num-.>",111:"<num-/>",144:"<num-lock>",145:"<scroll-lock>",160:"<shift-left>",161:"<shift-right>",162:"<control-left>",163:"<control-right>",164:"<alt-left>",165:"<alt-right>",166:"<browser-back>",167:"<browser-forward>",168:"<browser-refresh>",169:"<browser-stop>",170:"<browser-search>",171:"<browser-favorites>",172:"<browser-home>",173:o&&s?"-":"<volume-mute>",174:"<volume-down>",175:"<volume-up>",176:"<next-track>",177:"<prev-track>",178:"<stop>",179:"<play-pause>",180:"<launch-mail>",181:"<launch-media-select>",182:"<launch-app 1>",183:"<launch-app 2>",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",223:"<meta>",224:"<meta>",226:"<alt-gr>",229:"<ime-process>",231:a?"`":"<unicode>",246:"<attention>",247:"<crsel>",248:"<exsel>",249:"<erase-eof>",250:"<play>",251:"<zoom>",252:"<no-name>",253:"<pa-1>",254:"<clear>"};for(n=58;65>n;++n)u[n]=String.fromCharCode(n);for(n=48;58>n;++n)u[n]=n-48+"";for(n=65;91>n;++n)u[n]=String.fromCharCode(n);for(n=96;106>n;++n)u[n]="<num-"+(n-96)+">";for(n=112;136>n;++n)u[n]="F"+(n-111)},{}],29:[function(t,e,r){"use strict";function n(t){return R.eq(D,t)}function i(t){return n(V[t])}function o(){S.call(this),this._curKeyState=new Array(D.length),this._pressCount=new Array(D.length),this._releaseCount=new Array(D.length),this._tickInterval=null,this._rafHandle=null,this._tickRate=0,this._lastTick=U(),this._frameTime=0,this._paused=!0,this._width=0,this._height=0,this._wantFullscreen=!1,this._wantPointerLock=!1,this._fullscreenActive=!1,this._pointerLockActive=!1,this._render=p.bind(void 0,this),this.preventDefaults=!0,this.stopPropagation=!1;for(var t=0;t<D.length;++t)this._curKeyState[t]=!1,this._pressCount[t]=this._releaseCount[t]=0;this.element=null,this.bindings={},this.frameSkip=100,this.tickCount=0,this.frameCount=0,this.startTime=U(),this.tickTime=this._tickRate,this.frameTime=10,this.stickyFullscreen=!1,this.stickyPointLock=!1,this.scroll=[0,0,0],this.mouseX=0,this.mouseY=0,this.prevMouseX=0,this.prevMouseY=0}function a(t,e,r){if(r in e){for(var i=e[r],o=0,a=i.length;a>o;++o)if(t[n(i[o])])return!0;return!1}var s=n(r);return s>=0?t[s]:!1}function s(t,e,r){if(r in e){for(var i=e[r],o=0,a=0,s=i.length;s>a;++a)o+=t[n(i[a])];return o}var u=n(r);return u>=0?t[u]:0}function u(t){var e=t.element;if(t._wantFullscreen&&!t._fullscreenActive){var r=e.requestFullscreen||e.requestFullScreen||e.webkitRequestFullscreen||e.webkitRequestFullScreen||e.mozRequestFullscreen||e.mozRequestFullScreen||function(){};r.call(e)}if(t._wantPointerLock&&!t._pointerLockActive){var n=e.requestPointerLock||e.webkitRequestPointerLock||e.mozRequestPointerLock||e.msRequestPointerLock||e.oRequestPointerLock||function(){};n.call(e)}}function c(t){t._fullscreenActive=document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||!1,!t.stickyFullscreen&&t._fullscreenActive&&(t._wantFullscreen=!1);
}function l(t,e){t._pointerLockActive=t.element===(document.pointerLockElement||document.mozPointerLockElement||document.webkitPointerLockElement||null),!t.stickyPointerLock&&t._pointerLockActive&&(t._wantPointerLock=!1)}function f(t,e,r){var n=t._curKeyState[e];n!==r&&(r?t._pressCount[e]++:t._releaseCount[e]++,t._curKeyState[e]=r)}function h(t){for(var e,r,n,i=U()+t.frameSkip,o=t._pressCount,a=t._releaseCount,s=t._tickRate,u=D.length;!t._paused&&U()>=t._lastTick+s;){if(U()>i)return void(t._lastTick=U()+s);for(r=U(),t.emit("tick"),n=U(),t.tickTime=n-r,++t.tickCount,t._lastTick+=s,e=0;u>e;++e)o[e]=a[e]=0;t._pointerLockActive?(t.prevMouseX=t.mouseX=t.width>>1,t.prevMouseY=t.mouseY=t.height>>1):(t.prevMouseX=t.mouseX,t.prevMouseY=t.mouseY),t.scroll[0]=t.scroll[1]=t.scroll[2]=0}}function p(t){t._rafHandle=requestAnimationFrame(t._render),h(t);var e;e=t._paused?t._frameTime:N(1,(U()-t._lastTick)/t._tickRate),++t.frameCount;var r=U();t.emit("render",e);var n=U();t.frameTime=n-r}function d(t){return document.activeElement===document.body||document.activeElement===t.element}function v(t,e){t.preventDefaults&&e.preventDefault(),t.stopPropagation&&e.stopPropagation()}function g(t,e){v(t,e);var r=i(e.keyCode||e["char"]||e.which||e.charCode);r>=0&&f(t,r,!1)}function m(t,e){if(d(t))if(v(t,e),e.metaKey)j(t,e);else{var r=i(e.keyCode||e["char"]||e.which||e.charCode);r>=0&&f(t,r,!0)}}function y(t,e){for(var r=0;32>r;++r)f(t,H[r],!!(e&1<<r))}function b(t,e){if(v(t,e),t._pointerLockActive){var r=e.movementX||e.mozMovementX||e.webkitMovementX||0,n=e.movementY||e.mozMovementY||e.webkitMovementY||0;t.mouseX+=r,t.mouseY+=n}else t.mouseX=e.clientX-t.element.offsetLeft,t.mouseY=e.clientY-t.element.offsetTop;return!1}function w(t,e){return v(t,e),f(t,H[e.button],!0),!1}function _(t,e){return v(t,e),f(t,H[e.button],!1),!1}function A(t,e){return v(t,e),t._pointerLockActive?(t.prevMouseX=t.mouseX=t.width>>1,t.prevMouseY=t.mouseY=t.height>>1):(t.prevMouseX=t.mouseX=e.clientX-t.element.offsetLeft,t.prevMouseY=t.mouseY=e.clientY-t.element.offsetTop),!1}function M(t,e){return v(t,e),y(t,0),!1}function E(t,e){v(t,e);var r=1;switch(e.deltaMode){case 0:r=1;break;case 1:r=12;break;case 2:r=t.height}return t.scroll[0]+=e.deltaX*r,t.scroll[1]+=e.deltaY*r,t.scroll[2]+=e.deltaZ*r||0,!1}function x(t,e){return v(t,e),!1}function j(t,e){var r,n=D.length,i=t._curKeyState,o=t._releaseCount;for(r=0;n>r;++r)i[r]&&++o[r],i[r]=!1;return!1}function k(t,e){var r=0|t.element.clientWidth,n=0|t.element.clientHeight;(r!==t._width||n!==t._height)&&(t._width=r,t._height=n,t.emit("resize",r,n))}function I(){var t=document.createElement("div");return t.tabindex=1,t.style.position="absolute",t.style.left="0px",t.style.right="0px",t.style.top="0px",t.style.bottom="0px",t.style.height="100%",t.style.overflow="hidden",document.body.appendChild(t),document.body.style.overflow="hidden",document.body.style.height="100%",t}function L(t){t=t||{};var e=!!t.fullscreen,r=e;void 0!==typeof t.pointerLock&&(r=!!t.pointerLock);var n=new o;return n._tickRate=t.tickRate||30,n.frameSkip=t.frameSkip||5*(n._tickRate+5),n.stickyFullscreen=!!t.stickyFullscreen||!!t.sticky,n.stickyPointerLock=!!t.stickPointerLock||!t.sticky,t.bindings&&(n.bindings=t.bindings),setTimeout(function(){B(function(){var i=t.element;if("string"==typeof i){var o=document.querySelector(i);o||(o=document.getElementById(i)),o||(o=document.getElementByClass(i)[0]),o||(o=I()),n.element=o}else"object"==typeof i&&i?n.element=i:"function"==typeof i?n.element=i():n.element=I();n.element.style&&(n.element.style["-webkit-touch-callout"]="none",n.element.style["-webkit-user-select"]="none",n.element.style["-khtml-user-select"]="none",n.element.style["-moz-user-select"]="none",n.element.style["-ms-user-select"]="none",n.element.style["user-select"]="none"),n._width=n.element.clientWidth,n._height=n.element.clientHeight;var a=k.bind(void 0,n);if("undefined"!=typeof MutationObserver){var s=new MutationObserver(a);s.observe(n.element,{attributes:!0,subtree:!0})}else n.element.addEventListener("DOMSubtreeModified",a,!1);window.addEventListener("resize",a,!1),window.addEventListener("keydown",m.bind(void 0,n),!1),window.addEventListener("keyup",g.bind(void 0,n),!1),n.element.oncontextmenu=x.bind(void 0,n),n.element.addEventListener("mousedown",w.bind(void 0,n),!1),n.element.addEventListener("mouseup",_.bind(void 0,n),!1),n.element.addEventListener("mousemove",b.bind(void 0,n),!1),n.element.addEventListener("mouseenter",A.bind(void 0,n),!1);var f=M.bind(void 0,n);n.element.addEventListener("mouseleave",f,!1),n.element.addEventListener("mouseout",f,!1),window.addEventListener("mouseleave",f,!1),window.addEventListener("mouseout",f,!1);var h=j.bind(void 0,n);n.element.addEventListener("blur",h,!1),n.element.addEventListener("focusout",h,!1),n.element.addEventListener("focus",h,!1),window.addEventListener("blur",h,!1),window.addEventListener("focusout",h,!1),window.addEventListener("focus",h,!1),q(n.element,E.bind(void 0,n),!1);var p=c.bind(void 0,n);document.addEventListener("fullscreenchange",p,!1),document.addEventListener("mozfullscreenchange",p,!1),document.addEventListener("webkitfullscreenchange",p,!1),n.element.addEventListener("click",u.bind(void 0,n),!1);var d=l.bind(void 0,n);document.addEventListener("pointerlockchange",d,!1),document.addEventListener("mozpointerlockchange",d,!1),document.addEventListener("webkitpointerlockchange",d,!1),document.addEventListener("pointerlocklost",d,!1),document.addEventListener("webkitpointerlocklost",d,!1),document.addEventListener("mozpointerlocklost",d,!1),n.fullscreen=e,n.pointerLock=r,n.bind("mouse-left","mouse-1"),n.bind("mouse-right","mouse-3"),n.bind("mouse-middle","mouse-2"),n._lastTick=U(),n.startTime=U(),n.paused=!1,n.emit("init")})},0),n}var S=t("events").EventEmitter,T=t("util"),B=t("domready"),O=t("vkey"),F=t("invert-hash"),P=t("uniq"),R=t("binary-search-bounds"),C=t("iota-array"),N=Math.min;t("./lib/raf-polyfill.js");var q=t("./lib/mousewheel-polyfill.js"),U=t("./lib/hrtime-polyfill.js"),V=function(){var t,e,r=new Array(256);for(t=0;256>t;++t)r[t]="UNK";for(t in O)e=O[t],"<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&(e=e.substring(1,e.length-1)),e=e.replace(/\s/g,"-"),r[parseInt(t)]=e;return r}(),D=P(Object.keys(F(V)));T.inherits(o,S);var z=o.prototype;z.keyNames=D,z.bind=function(t){var e;e=t in this.bindings?this.bindings[t]:[];for(var r,i=1,o=arguments.length;o>i;++i)if(r=arguments[i],n(r)>=0)e.push(r);else if(r in this.bindings)for(var a=this.bindings[r],s=0;s<a.length;++s)e.push(a[s]);e=P(e),e.length>0&&(this.bindings[t]=e),this.emit("bind",t,e)},z.unbind=function(t){t in this.bindings&&delete this.bindings[t],this.emit("unbind",t)},z.down=function(t){return a(this._curKeyState,this.bindings,t)},z.wasDown=function(t){return this.down(t)||!!this.press(t)},z.up=function(t){return!this.down(t)},z.wasUp=function(t){return this.up(t)||!!this.release(t)},z.press=function(t){return s(this._pressCount,this.bindings,t)},z.release=function(t){return s(this._releaseCount,this.bindings,t)},Object.defineProperty(z,"paused",{get:function(){return this._paused},set:function(t){var e=!!t;e!==this._paused&&(this._paused?(this._paused=!1,this._lastTick=U()-Math.floor(this._frameTime*this._tickRate),this._tickInterval=setInterval(h,this._tickRate,this),this._rafHandle=requestAnimationFrame(this._render)):(this._paused=!0,this._frameTime=N(1,(U()-this._lastTick)/this._tickRate),clearInterval(this._tickInterval)))}});var Y=document.exitFullscreen||document.cancelFullscreen||document.cancelFullScreen||document.webkitCancelFullscreen||document.webkitCancelFullScreen||document.mozCancelFullscreen||document.mozCancelFullScreen||function(){};Object.defineProperty(z,"fullscreen",{get:function(){return this._fullscreenActive},set:function(t){var e=!!t;return e?(this._wantFullscreen=!0,u(this)):(this._wantFullscreen=!1,Y.call(document)),this._fullscreenActive}});var X=document.exitPointerLock||document.webkitExitPointerLock||document.mozExitPointerLock||function(){};Object.defineProperty(z,"pointerLock",{get:function(){return this._pointerLockActive},set:function(t){var e=!!t;return e?(this._wantPointerLock=!0,u(this)):(this._wantPointerLock=!1,X.call(document)),this._pointerLockActive}}),Object.defineProperty(z,"width",{get:function(){return this.element.clientWidth}}),Object.defineProperty(z,"height",{get:function(){return this.element.clientHeight}});var H=C(32).map(function(t){return n("mouse-"+(t+1))});e.exports=L},{"./lib/hrtime-polyfill.js":20,"./lib/mousewheel-polyfill.js":21,"./lib/raf-polyfill.js":22,"binary-search-bounds":23,domready:24,events:6,"invert-hash":25,"iota-array":26,uniq:27,util:10,vkey:28}],30:[function(t,e,r){!function(){"use strict";function t(e){e.permitHostObjects___&&e.permitHostObjects___(t)}function r(t){return!(t.substr(0,p.length)==p&&"___"===t.substr(t.length-3))}function n(t){if(t!==Object(t))throw new TypeError("Not an object: "+t);var e=t[d];if(e&&e.key===t)return e;if(!h(t))return void 0;e={key:t};try{return f(t,d,{value:e,writable:!1,enumerable:!1,configurable:!1}),e}catch(r){return void 0}}function i(t){return t.prototype=null,Object.freeze(t)}function o(){y||"undefined"==typeof console||(y=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=t);var a=!1;if("function"==typeof WeakMap){var s=WeakMap;if("undefined"!=typeof navigator&&/Firefox/.test(navigator.userAgent));else{var u=new s,c=Object.freeze({});if(u.set(c,1),1===u.get(c))return void(e.exports=WeakMap);a=!0}}var l=(Object.prototype.hasOwnProperty,Object.getOwnPropertyNames),f=Object.defineProperty,h=Object.isExtensible,p="weakmap:",d=p+"ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var v=new ArrayBuffer(25),g=new Uint8Array(v);crypto.getRandomValues(g),d=p+"rand:"+Array.prototype.map.call(g,function(t){return(t%36).toString(36)}).join("")+"___"}if(f(Object,"getOwnPropertyNames",{value:function(t){return l(t).filter(r)}}),"getPropertyNames"in Object){var m=Object.getPropertyNames;f(Object,"getPropertyNames",{value:function(t){return m(t).filter(r)}})}!function(){var t=Object.freeze;f(Object,"freeze",{value:function(e){return n(e),t(e)}});var e=Object.seal;f(Object,"seal",{value:function(t){return n(t),e(t)}});var r=Object.preventExtensions;f(Object,"preventExtensions",{value:function(t){return n(t),r(t)}})}();var y=!1,b=0,w=function(){function t(t,e){var r,i=n(t);return i?c in i?i[c]:e:(r=s.indexOf(t),r>=0?u[r]:e)}function e(t){var e=n(t);return e?c in e:s.indexOf(t)>=0}function r(t,e){var r,i=n(t);return i?i[c]=e:(r=s.indexOf(t),r>=0?u[r]=e:(r=s.length,u[r]=e,s[r]=t)),this}function a(t){var e,r,i=n(t);return i?c in i&&delete i[c]:(e=s.indexOf(t),0>e?!1:(r=s.length-1,s[e]=void 0,u[e]=u[r],s[e]=s[r],s.length=r,u.length=r,!0))}this instanceof w||o();var s=[],u=[],c=b++;return Object.create(w.prototype,{get___:{value:i(t)},has___:{value:i(e)},set___:{value:i(r)},delete___:{value:i(a)}})};w.prototype=Object.create(Object.prototype,{get:{value:function(t,e){return this.get___(t,e)},writable:!0,configurable:!0},has:{value:function(t){return this.has___(t)},writable:!0,configurable:!0},set:{value:function(t,e){return this.set___(t,e)},writable:!0,configurable:!0},"delete":{value:function(t){return this.delete___(t)},writable:!0,configurable:!0}}),"function"==typeof s?!function(){function r(){function e(t,e){return l?c.has(t)?c.get(t):l.get___(t,e):c.get(t,e)}function r(t){return c.has(t)||(l?l.has___(t):!1)}function n(t){var e=!!c["delete"](t);return l?l.delete___(t)||e:e}this instanceof w||o();var u,c=new s,l=void 0,f=!1;return u=a?function(t,e){return c.set(t,e),c.has(t)||(l||(l=new w),l.set(t,e)),this}:function(t,e){if(f)try{c.set(t,e)}catch(r){l||(l=new w),l.set___(t,e)}else c.set(t,e);return this},Object.create(w.prototype,{get___:{value:i(e)},has___:{value:i(r)},set___:{value:i(u)},delete___:{value:i(n)},permitHostObjects___:{value:i(function(e){if(e!==t)throw new Error("bogus call to permitHostObjects___");f=!0})}})}a&&"undefined"!=typeof Proxy&&(Proxy=void 0),r.prototype=w.prototype,e.exports=r,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),e.exports=w)}}()},{}],31:[function(t,e,r){"use strict";function n(t){return t.replace(/^[A-Z]+_/,"")}function i(t){var e=a.get(t);if(e)return e;for(var r={},i=t.getSupportedExtensions(),o=0;o<i.length;++o){var s=i[o];if(0!==s.indexOf("MOZ_")){var u=t.getExtension(i[o]);if(u)for(;;){r[s]=u;var c=n(s);if(c===s)break;s=c}}}return a.set(t,r),r}var o="undefined"==typeof WeakMap?t("weak-map"):WeakMap,a=new o;e.exports=i},{"weak-map":30}],32:[function(t,e,r){"use strict";function n(t,e){for(var r=[0,0,0,0],n=0;4>n;++n)for(var i=0;4>i;++i)r[i]+=t[4*n+i]*e[n];return r}function i(t,e,r,i,o){for(var a=n(i,n(r,n(e,[t[0],t[1],t[2],1]))),s=0;3>s;++s)a[s]/=a[3];return[.5*o[0]*(1+a[0]),.5*o[1]*(1-a[1])]}function o(t,e){if(2===t.length){for(var r=0,n=0,i=0;2>i;++i)r+=Math.pow(e[i]-t[0][i],2),n+=Math.pow(e[i]-t[1][i],2);return r=Math.sqrt(r),n=Math.sqrt(n),1e-6>r+n?[1,0]:[n/(r+n),r/(n+r)]}if(3===t.length){var o=[0,0];return c(t[0],t[1],t[2],e,o),u(t,o)}return[]}function a(t,e){for(var r=[0,0,0],n=0;n<t.length;++n)for(var i=t[n],o=e[n],a=0;3>a;++a)r[a]+=o*i[a];return r}function s(t,e,r,n,s,u){if(1===t.length)return[0,t[0].slice()];for(var c=new Array(t.length),l=0;l<t.length;++l)c[l]=i(t[l],r,n,s,u);for(var f=0,h=1/0,l=0;l<c.length;++l){for(var p=0,d=0;2>d;++d)p+=Math.pow(c[l][d]-e[d],2);h>p&&(h=p,f=l)}for(var v=o(c,e),g=0,l=0;3>l;++l){if(v[l]<-.001||v[l]>1.0001)return null;g+=v[l]}return Math.abs(g-1)>.001?null:[f,a(t,v)]}var u=t("barycentric"),c=t("polytope-closest-point/lib/closest_point_2d.js");e.exports=s},{barycentric:34,"polytope-closest-point/lib/closest_point_2d.js":93}],33:[function(t,e,r){"use strict";function n(t,e,r,n,i,o,a,s,u,c,l,f,h,p,d,v,g,m,y,b){this.gl=t,this.cells=[],this.positions=[],this.triShader=e,this.lineShader=r,this.pointShader=n,this.pickShader=i,this.pointPickShader=o,this.trianglePositions=a,this.triangleColors=s,this.triangleNormals=u,this.triangleIds=c,this.triangleVAO=l,this.triangleCount=0,this.lineWidth=1,this.edgePositions=f,this.edgeColors=h,this.edgeIds=p,this.edgeVAO=d,this.edgeCount=0,this.pointPositions=v,this.pointColors=g,this.pointSizes=m,this.pointIds=y,this.pointVAO=b,this.pointCount=0,this.pickId=0,this.bounds=[[1/0,1/0,1/0],[-(1/0),-(1/0),-(1/0)]],this.clipBounds=[[-(1/0),-(1/0),-(1/0)],[1/0,1/0,1/0]],this._model=w,this._view=w,this._projection=w,this._resolution=[1,1]}function i(t){var e=v(t);return e.attributes.position.location=0,e.attributes.color.location=1,e.attributes.normal.location=3,e}function o(t){var e=g(t);return e.attributes.position.location=0,e.attributes.color.location=1,e}function a(t){var e=m(t);return e.attributes.position.location=0,e.attributes.color.location=1,e.attributes.pointSize.location=3,e}function s(t){var e=y(t);return e.attributes.position.location=0,e.attributes.id.location=2,e}function u(t){var e=b(t);return e.attributes.position.location=0,e.attributes.id.location=2,e.attributes.pointSize.location=3,e}function c(t,e){var r=i(t),c=o(t),h=a(t),p=s(t),d=u(t),v=l(t),g=l(t),m=l(t),y=l(t),b=f(t,[{buffer:v,type:t.FLOAT,size:3},{buffer:g,type:t.FLOAT,size:4},{buffer:y,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:m,type:t.FLOAT,size:3}]),w=l(t),_=l(t),A=l(t),M=f(t,[{buffer:w,type:t.FLOAT,size:3},{buffer:_,type:t.FLOAT,size:4},{buffer:A,type:t.UNSIGNED_BYTE,size:4,normalized:!0}]),E=l(t),x=l(t),j=l(t),k=l(t),I=f(t,[{buffer:E,type:t.FLOAT,size:3},{buffer:x,type:t.FLOAT,size:4},{buffer:k,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:j,type:t.FLOAT,size:1}]),L=new n(t,r,c,h,p,d,v,g,m,y,b,w,_,A,M,E,x,j,k,I);return L.update(e),L}var l=t("gl-buffer"),f=t("gl-vao"),h=(t("glslify"),t("normals")),p=t("gl-mat4"),d=t("./lib/closest-point"),v=t("glslify/adapter.js")("\n#define GLSLIFY 1\n\nprecision mediump float;\nattribute vec3 position;\nattribute vec4 color;\nattribute vec3 normal;\nuniform mat4 model, modelInverseTranspose, view, projection;\nuniform vec3 eyePosition;\nvarying vec4 f_color;\nvarying vec3 f_position, f_normal, viewDirection, f_data;\nvoid main() {\n  vec4 m_position = model * vec4(position, 1.0);\n  vec4 t_position = view * m_position;\n  gl_Position = projection * t_position;\n  f_color = color;\n  f_normal = normalize((modelInverseTranspose * vec4(normal, 0.0)).xyz);\n  f_position = m_position.xyz / m_position.w;\n  f_data = position;\n  viewDirection = eyePosition - f_position;\n}","\n#define GLSLIFY 1\n\nprecision mediump float;\nuniform vec3 lightPosition, ambient, diffuse, specular;\nuniform vec3 clipBounds[2];\nuniform float specularExponent;\nvarying vec4 f_color;\nvarying vec3 f_position, f_normal, viewDirection, f_data;\nvoid main() {\n  if(any(lessThan(f_data, clipBounds[0])) || any(greaterThan(f_data, clipBounds[1]))) {\n    discard;\n  }\n  vec3 lightDirection = normalize(lightPosition - f_position);\n  vec3 normal = normalize(f_normal);\n  float diffuseIntensity = clamp(dot(normal, lightDirection), 0.0, 1.0);\n  vec3 halfView = normalize(lightDirection + normalize(viewDirection));\n  float specularIntensity = pow(clamp(dot(normal, halfView), 0.0, 1.0), specularExponent);\n  gl_FragColor = vec4(f_color.xyz * (ambient + diffuse * diffuseIntensity) + specular * specularIntensity, f_color.a);\n}",[{name:"model",type:"mat4"},{name:"modelInverseTranspose",type:"mat4"},{name:"view",type:"mat4"},{name:"projection",type:"mat4"},{name:"eyePosition",type:"vec3"},{name:"lightPosition",type:"vec3"},{name:"ambient",type:"vec3"},{name:"diffuse",type:"vec3"},{name:"specular",type:"vec3"},{name:"clipBounds[0]",type:"vec3"},{name:"clipBounds[1]",type:"vec3"},{name:"specularExponent",type:"float"}],[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"normal",type:"vec3"}]),g=t("glslify/adapter.js")("\n#define GLSLIFY 1\n\nprecision mediump float;\nattribute vec3 position;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nvarying vec4 f_color;\nvarying vec3 f_data;\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data = position;\n}","\n#define GLSLIFY 1\n\nprecision mediump float;\nuniform vec3 clipBounds[2];\nvarying vec4 f_color;\nvarying vec3 f_data;\nvoid main() {\n  if(any(lessThan(f_data, clipBounds[0])) || any(greaterThan(f_data, clipBounds[1]))) {\n    discard;\n  }\n  gl_FragColor = f_color;\n}",[{name:"model",type:"mat4"},{name:"view",type:"mat4"},{name:"projection",type:"mat4"},{name:"clipBounds[0]",type:"vec3"},{name:"clipBounds[1]",type:"vec3"}],[{name:"position",type:"vec3"},{name:"color",type:"vec4"}]),m=t("glslify/adapter.js")("\n#define GLSLIFY 1\n\nprecision mediump float;\nattribute vec3 position;\nattribute float pointSize;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\nvarying vec4 f_color;\nvoid main() {\n  if(any(lessThan(position, clipBounds[0])) || any(greaterThan(position, clipBounds[1]))) {\n    gl_Position = vec4(0, 0, 0, 0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n    f_color = color;\n  }\n}","\n#define GLSLIFY 1\n\nprecision mediump float;\nvarying vec4 f_color;\nvoid main() {\n  gl_FragColor = f_color;\n}",[{name:"model",type:"mat4"},{name:"view",type:"mat4"},{name:"projection",type:"mat4"},{name:"clipBounds[0]",type:"vec3"},{name:"clipBounds[1]",type:"vec3"}],[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"color",type:"vec4"}]),y=t("glslify/adapter.js")("\n#define GLSLIFY 1\n\nprecision mediump float;\nattribute vec3 position;\nattribute vec4 id;\nuniform mat4 model, view, projection;\nvarying vec3 f_position;\nvarying vec4 f_id;\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id = id;\n  f_position = position;\n}","\n#define GLSLIFY 1\n\nprecision mediump float;\nuniform vec3 clipBounds[2];\nuniform float pickId;\nvarying vec3 f_position;\nvarying vec4 f_id;\nvoid main() {\n  if(any(lessThan(f_position, clipBounds[0])) || any(greaterThan(f_position, clipBounds[1]))) {\n    discard;\n  }\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}",[{name:"model",type:"mat4"},{name:"view",type:"mat4"},{name:"projection",type:"mat4"},{name:"clipBounds[0]",type:"vec3"},{name:"clipBounds[1]",type:"vec3"},{name:"pickId",type:"float"}],[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]),b=t("glslify/adapter.js")("\n#define GLSLIFY 1\n\nprecision mediump float;\nattribute vec3 position;\nattribute float pointSize;\nattribute vec4 id;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\nvarying vec3 f_position;\nvarying vec4 f_id;\nvoid main() {\n  if(any(lessThan(position, clipBounds[0])) || any(greaterThan(position, clipBounds[1]))) {\n    gl_Position = vec4(0, 0, 0, 0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id = id;\n  f_position = position;\n}","\n#define GLSLIFY 1\n\nprecision mediump float;\nuniform vec3 clipBounds[2];\nuniform float pickId;\nvarying vec3 f_position;\nvarying vec4 f_id;\nvoid main() {\n  if(any(lessThan(f_position, clipBounds[0])) || any(greaterThan(f_position, clipBounds[1]))) {\n    discard;\n  }\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}",[{name:"model",type:"mat4"},{name:"view",type:"mat4"},{name:"projection",type:"mat4"},{name:"clipBounds[0]",type:"vec3"},{name:"clipBounds[1]",type:"vec3"},{name:"clipBounds[0]",type:"vec3"},{name:"clipBounds[1]",type:"vec3"},{name:"pickId",type:"float"}],[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]),w=p.identity(p.create()),_=n.prototype;_.update=function(t){t=t||{};var e=(this.gl,t.cells),r=t.positions,n=[],i=[],o=[],a=[],s=[],u=[],c=[],l=[],f=[],p=[],d=[];"clipBounds"in t&&(this.clipBounds=t.clipBounds),"pickId"in t&&(this.pickId=t.pickId),"lineWidth"in t&&(this.lineWidth=t.lineWidth),this.cells=e,this.positions=r;var v=t.vertexNormals,g=t.cellNormals;t.useCellNormals&&!g&&(g=h.facetNormals(e,r)),g||v||(v=h.vertexNormals(e,r));var m=t.vertexColors,y=t.cellColors,b=t.meshColor||[.7,.5,.2],w=t.pointSizes,_=t.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-(1/0),-(1/0),-(1/0)]];for(var A=0;A<r.length;++A)for(var M=r[A],E=0;3>E;++E)!isNaN(M)&&isFinite(M)&&(this.bounds[0][E]=Math.min(this.bounds[0][E],M[E]),this.bounds[1][E]=Math.max(this.bounds[1][E],M[E]));var x=0,j=0,k=0;t:for(var A=0;A<e.length;++A){var I=e[A];switch(I.length){case 1:for(var L=I[0],M=r[L],E=0;3>E;++E)if(isNaN(M[E])||!isFinite(M[E]))continue t;l.push(M[0],M[1],M[2]);var S;S=m?m[L]:y?y[A]:b,3===S.length?f.push(S[0],S[1],S[2],1):f.push(S[0],S[1],S[2],S[3]),p.push(w?w[L]:_),d.push(A),k+=1;break;case 2:for(var E=0;2>E;++E)for(var L=I[E],M=r[L],T=0;3>T;++T)if(isNaN(M[T])||!isFinite(M[T]))continue t;for(var E=0;2>E;++E){var L=I[E],M=r[L];s.push(M[0],M[1],M[2]);var S;S=m?m[L]:y?y[A]:b,3===S.length?u.push(S[0],S[1],S[2],1):u.push(S[0],S[1],S[2],S[3]),c.push(A)}j+=1;break;case 3:for(var E=0;3>E;++E)for(var L=I[E],M=r[L],T=0;3>T;++T)if(isNaN(M[T])||!isFinite(M[T]))continue t;for(var E=0;3>E;++E){var L=I[E],M=r[L];n.push(M[0],M[1],M[2]);var S;S=m?m[L]:y?y[A]:b,3===S.length?i.push(S[0],S[1],S[2],1):i.push(S[0],S[1],S[2],S[3]);var B;B=v?v[L]:g[A],o.push(B[0],B[1],B[2]),a.push(A)}x+=1}}this.pointCount=k,this.edgeCount=j,this.triangleCount=x,this.pointPositions.update(l),this.pointColors.update(f),this.pointSizes.update(p),this.pointIds.update(new Uint32Array(d)),this.edgePositions.update(s),this.edgeColors.update(u),this.edgeIds.update(new Uint32Array(c)),this.trianglePositions.update(n),this.triangleColors.update(i),this.triangleNormals.update(o),this.triangleIds.update(new Uint32Array(a))},_.draw=function(t){t=t||{};for(var e=this.gl,r=t.model||w,n=t.view||w,i=t.projection||w,o=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],a=0;3>a;++a)o[0][a]=Math.max(o[0][a],this.clipBounds[0][a]),o[1][a]=Math.min(o[1][a],this.clipBounds[1][a]);if(this.triangleCount>0){var s=this.triShader;s.bind(),s.uniforms.model=r,s.uniforms.view=n,s.uniforms.projection=i;var u=p.invert(p.create(),n);s.uniforms.lightPosition=t.lightPosition||[0,100,0],s.uniforms.ambient=t.ambient||[.3,.3,.3],s.uniforms.diffuse=t.diffuse||[.5,.5,.5],s.uniforms.specular=t.specular||[1,1,1],s.uniforms.specularExponent=t.specularExponent||10,s.uniforms.eyePosition=[u[12],u[13],u[14]],s.uniforms.clipBounds=o;var c=p.create();s.uniforms.modelInverseTranspose=p.transpose(c,p.invert(c,r)),this.triangleVAO.bind(),e.drawArrays(e.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}if(this.edgeCount>0){var s=this.lineShader;s.bind(),s.uniforms.model=r,s.uniforms.view=n,s.uniforms.projection=i,s.uniforms.clipBounds=o,this.edgeVAO.bind(),e.lineWidth(this.lineWidth),e.drawArrays(e.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()}if(this.pointCount>0){var s=this.pointShader;s.bind(),s.uniforms.model=r,s.uniforms.view=n,s.uniforms.projection=i,s.uniforms.clipBounds=o,this.pointVAO.bind(),e.drawArrays(e.POINTS,0,this.pointCount),this.pointVAO.unbind()}},_.drawPick=function(t){t=t||{};for(var e=this.gl,r=t.model||w,n=t.view||w,i=t.projection||w,o=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],a=0;3>a;++a)o[0][a]=Math.max(o[0][a],this.clipBounds[0][a]),o[1][a]=Math.min(o[1][a],this.clipBounds[1][a]);this._model=[].slice.call(r),this._view=[].slice.call(n),this._projection=[].slice.call(i),this._resolution=[e.drawingBufferWidth,e.drawingBufferHeight];var s=this.pickShader;s.bind();var u=s.uniforms;if(u.model=r,u.view=n,u.projection=i,u.pickId=this.pickId/255,u.clipBounds=o,this.triangleCount>0&&(this.triangleVAO.bind(),e.drawArrays(e.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),e.lineWidth(this.lineWidth),e.drawArrays(e.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0){var s=this.pointPickShader;s.bind();var u=s.uniforms;u.model=r,u.view=n,u.projection=i,u.pickId=this.pickId/255,u.clipBounds=o,this.pointVAO.bind(),e.drawArrays(e.POINTS,0,this.pointCount),this.pointVAO.unbind()}},_.pick=function(t){if(!t)return null;if(t.id!==this.pickId)return null;for(var e=t.value[0]+256*t.value[1]+65536*t.value[2],r=this.cells[e],n=this.positions,i=new Array(r.length),o=0;o<r.length;++o)i[o]=n[r[o]];var a=d(i,t.coord,this._model,this._view,this._projection,this._resolution);return a?{position:a[1],index:r[a[0]],cell:r,cellId:e}:null},_.dispose=function(){this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.edgeVAO.dispose(),this.pointVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeIds.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointSizes.dispose(),this.pointIds.dispose()},e.exports=c},{"./lib/closest-point":32,"gl-buffer":42,"gl-mat4":64,"gl-vao":84,glslify:86,"glslify/adapter.js":85,normals:92}],34:[function(t,e,r){"use strict";function n(t){for(var e=0,r=0;r<t.length;++r)e+=t[r];return e}function i(t,e){for(var r=e.length,i=new Array(r+1),a=0;r>a;++a){for(var s=new Array(r+1),u=0;r>=u;++u)s[u]=t[u][a];i[a]=s}i[r]=new Array(r+1);for(var a=0;r>=a;++a)i[r][a]=1;for(var c=new Array(r+1),a=0;r>a;++a)c[a]=e[a];c[r]=1;var l=o(i,c),f=n(l[r+1]);0===f&&(f=1);for(var h=new Array(r+1),a=0;r>=a;++a)h[a]=n(l[a])/f;return h}e.exports=i;var o=t("robust-linear-solve")},{"robust-linear-solve":35}],35:[function(t,e,r){"use strict";function n(t){for(var e="robustLinearSolve"+t+"d",r=["function ",e,"(A,b){return ["],n=0;t>n;++n){r.push("det([");for(var i=0;t>i;++i){i>0&&r.push(","),r.push("[");for(var o=0;t>o;++o)o>0&&r.push(","),o===n?r.push("+b[",i,"]"):r.push("+A[",i,"][",o,"]");r.push("]")}r.push("]),")}r.push("det(A)]}return ",e);var a=new Function("det",r.join(""));return a(6>t?s[t]:s)}function i(){return[0]}function o(t,e){return[[e[0]],[t[0][0]]]}function a(){for(;c.length<u;)c.push(n(c.length));for(var t=[],r=["function dispatchLinearSolve(A,b){switch(A.length){"],i=0;u>i;++i)t.push("s"+i),r.push("case ",i,":return s",i,"(A,b);");r.push("}var s=CACHE[A.length];if(!s)s=CACHE[A.length]=g(A.length);return s(A,b)}return dispatchLinearSolve"),t.push("CACHE","g",r.join(""));var o=Function.apply(void 0,t);e.exports=o.apply(void 0,c.concat([c,n]));for(var i=0;u>i;++i)e.exports[i]=c[i]}var s=t("robust-determinant"),u=6,c=[i,o];a()},{"robust-determinant":41}],36:[function(t,e,r){"use strict";function n(t){for(var e=t.length,r=t[t.length-1],n=e,i=e-2;i>=0;--i){var o=r,a=t[i];r=o+a;var s=r-o,u=a-s;u&&(t[--n]=r,r=u)}for(var c=0,i=n;e>i;++i){var o=t[i],a=r;r=o+a;var s=r-o,u=a-s;u&&(t[c++]=u)}return t[c++]=r,t.length=c,t}e.exports=n},{}],37:[function(t,e,r){"use strict";function n(t,e,r){var n=t+e,i=n-t,o=n-i,a=e-i,s=t-o;return r?(r[0]=s+a,r[1]=n,r):[s+a,n]}e.exports=n},{}],38:[function(t,e,r){"use strict";function n(t,e){var r=t.length;if(1===r){var n=i(t[0],e);return n[0]?n:[n[1]]}var a=new Array(2*r),s=[.1,.1],u=[.1,.1],c=0;i(t[0],e,s),s[0]&&(a[c++]=s[0]);for(var l=1;r>l;++l){i(t[l],e,u);var f=s[1];o(f,u[0],s),s[0]&&(a[c++]=s[0]);var h=u[1],p=s[1],d=h+p,v=d-h,g=p-v;s[1]=d,g&&(a[c++]=g)}return s[1]&&(a[c++]=s[1]),0===c&&(a[c++]=0),a.length=c,a}var i=t("two-product"),o=t("two-sum");e.exports=n},{"two-product":40,"two-sum":37}],39:[function(t,e,r){"use strict";function n(t,e){var r=t+e,n=r-t,i=r-n,o=e-n,a=t-i,s=a+o;return s?[s,r]:[r]}function i(t,e){var r=0|t.length,i=0|e.length;if(1===r&&1===i)return n(t[0],e[0]);var o,a,s=r+i,u=new Array(s),c=0,l=0,f=0,h=Math.abs,p=t[l],d=h(p),v=e[f],g=h(v);g>d?(a=p,l+=1,r>l&&(p=t[l],d=h(p))):(a=v,f+=1,i>f&&(v=e[f],g=h(v))),r>l&&g>d||f>=i?(o=p,l+=1,r>l&&(p=t[l],d=h(p))):(o=v,f+=1,i>f&&(v=e[f],g=h(v)));for(var m,y,b,w,_,A=o+a,M=A-o,E=a-M,x=E,j=A;r>l&&i>f;)g>d?(o=p,l+=1,r>l&&(p=t[l],d=h(p))):(o=v,f+=1,i>f&&(v=e[f],g=h(v))),a=x,A=o+a,M=A-o,E=a-M,E&&(u[c++]=E),m=j+A,y=m-j,b=m-y,w=A-y,_=j-b,x=_+w,j=m;for(;r>l;)o=p,a=x,A=o+a,M=A-o,E=a-M,E&&(u[c++]=E),m=j+A,y=m-j,b=m-y,w=A-y,_=j-b,x=_+w,j=m,l+=1,r>l&&(p=t[l]);for(;i>f;)o=v,a=x,A=o+a,M=A-o,E=a-M,E&&(u[c++]=E),m=j+A,y=m-j,b=m-y,w=A-y,_=j-b,x=_+w,j=m,f+=1,i>f&&(v=e[f]);return x&&(u[c++]=x),j&&(u[c++]=j),c||(u[c++]=0),u.length=c,u}e.exports=i},{}],40:[function(t,e,r){"use strict";function n(t,e,r){var n=t*e,o=i*t,a=o-t,s=o-a,u=t-s,c=i*e,l=c-e,f=c-l,h=e-f,p=n-s*f,d=p-u*f,v=d-s*h,g=u*h-v;return r?(r[0]=g,r[1]=n,r):[g,n]}e.exports=n;var i=+(Math.pow(2,27)+1)},{}],41:[function(t,e,r){"use strict";function n(t,e){for(var r=new Array(t.length-1),n=1;n<t.length;++n)for(var i=r[n-1]=new Array(t.length-1),o=0,a=0;o<t.length;++o)o!==e&&(i[a++]=t[n][o]);return r}function i(t){for(var e=new Array(t),r=0;t>r;++r){e[r]=new Array(t);for(var n=0;t>n;++n)e[r][n]=["m[",r,"][",n,"]"].join("")}return e}function o(t){return 1&t?"-":""}function a(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",a(t.slice(0,e)),",",a(t.slice(e)),")"].join("")}function s(t){if(2===t.length)return["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("");for(var e=[],r=0;r<t.length;++r)e.push(["scale(",s(n(t,r)),",",o(r),t[0][r],")"].join(""));return a(e)}function u(t){var e=new Function("sum","scale","prod","compress",["function robustDeterminant",t,"(m){return compress(",s(i(t)),")};return robustDeterminant",t].join(""));return e(f,h,l,p)}function c(){for(;v.length<d;)v.push(u(v.length));for(var t=[],r=["function robustDeterminant(m){switch(m.length){"],n=0;d>n;++n)t.push("det"+n),r.push("case ",n,":return det",n,"(m);");
r.push("}var det=CACHE[m.length];if(!det)det=CACHE[m.length]=gen(m.length);return det(m);}return robustDeterminant"),t.push("CACHE","gen",r.join(""));var i=Function.apply(void 0,t);e.exports=i.apply(void 0,v.concat([v,u]));for(var n=0;n<v.length;++n)e.exports[n]=v[n]}var l=t("two-product"),f=t("robust-sum"),h=t("robust-scale"),p=t("robust-compress"),d=6,v=[function(){return[0]},function(t){return[t[0][0]]}];c()},{"robust-compress":36,"robust-scale":38,"robust-sum":39,"two-product":40}],42:[function(t,e,r){"use strict";function n(t,e,r,n,i){this.gl=t,this.type=e,this.handle=r,this.length=n,this.usage=i}function i(t,e,r,n,i,o){var a=i.length*i.BYTES_PER_ELEMENT;if(0>o)return t.bufferData(e,i,n),a;if(a+o>r)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return t.bufferSubData(e,o,i),r}function o(t,e){for(var r=u.malloc(t.length,e),n=t.length,i=0;n>i;++i)r[i]=t[i];return r}function a(t,e){for(var r=1,n=e.length-1;n>=0;--n){if(e[n]!==r)return!1;r*=t[n]}return!0}function s(t,e,r,i){if(f(t),r=r||t.ARRAY_BUFFER,i=i||t.DYNAMIC_DRAW,r!==t.ARRAY_BUFFER&&r!==t.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(i!==t.DYNAMIC_DRAW&&i!==t.STATIC_DRAW&&i!==t.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var o=t.createBuffer(),a=new n(t,r,o,0,i);return a.update(e),a}var u=t("typedarray-pool"),c=t("ndarray-ops"),l=t("ndarray"),f=t("webglew"),h=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"],p=n.prototype;p.bind=function(){this.gl.bindBuffer(this.type,this.handle)},p.unbind=function(){this.gl.bindBuffer(this.type,null)},p.dispose=function(){this.gl.deleteBuffer(this.handle)},p.update=function(t,e){if("number"!=typeof e&&(e=-1),this.bind(),"object"==typeof t&&"undefined"!=typeof t.shape){var r=t.dtype;if(h.indexOf(r)<0&&(r="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER){var n=f(this.gl),s=n.OES_element_index_uint;r=s&&"uint16"!==r?"uint32":"uint16"}if(r===t.dtype&&a(t.shape,t.stride))0===t.offset&&t.data.length===t.shape[0]?this.length=i(this.gl,this.type,this.length,this.usage,t.data,e):this.length=i(this.gl,this.type,this.length,this.usage,t.data.subarray(t.offset,t.shape[0]),e);else{var p=u.malloc(t.size,r),d=l(p,t.shape);c.assign(d,t),0>e?this.length=i(this.gl,this.type,this.length,this.usage,p,e):this.length=i(this.gl,this.type,this.length,this.usage,p.subarray(0,t.size),e),u.free(p)}}else if(Array.isArray(t)){var v;v=this.type===this.gl.ELEMENT_ARRAY_BUFFER?o(t,"uint16"):o(t,"float32"),0>e?this.length=i(this.gl,this.type,this.length,this.usage,v,e):this.length=i(this.gl,this.type,this.length,this.usage,v.subarray(0,t.length),e),u.free(v)}else if("object"==typeof t&&"number"==typeof t.length)this.length=i(this.gl,this.type,this.length,this.usage,t,e);else{if("number"!=typeof t&&void 0!==t)throw new Error("gl-buffer: Invalid data type");if(e>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");t=0|t,0>=t&&(t=1),this.gl.bufferData(this.type,0|t,this.usage),this.length=t}},e.exports=s},{ndarray:48,"ndarray-ops":43,"typedarray-pool":52,webglew:54}],43:[function(t,e,r){"use strict";function n(t){if(!t)return s;for(var e=0;e<t.args.length;++e){var r=t.args[e];0===e?t.args[e]={name:r,lvalue:!0,rvalue:!!t.rvalue,count:t.count||1}:t.args[e]={name:r,lvalue:!1,rvalue:!0,count:1}}return t.thisVars||(t.thisVars=[]),t.localVars||(t.localVars=[]),t}function i(t){return a({args:t.args,pre:n(t.pre),body:n(t.body),post:n(t.proc),funcName:t.funcName})}function o(t){for(var e=[],r=0;r<t.args.length;++r)e.push("a"+r);var n=new Function("P",["return function ",t.funcName,"_ndarrayops(",e.join(","),") {P(",e.join(","),");return a0}"].join(""));return n(i(t))}var a=t("cwise-compiler"),s={body:"",args:[],thisVars:[],localVars:[]},u={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var t in u){var e=u[t];r[t]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+e+"c"},funcName:t}),r[t+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a"+e+"=b"},rvalue:!0,funcName:t+"eq"}),r[t+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+e+"s"},funcName:t+"s"}),r[t+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a"+e+"=s"},rvalue:!0,funcName:t+"seq"})}}();var c={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var t in c){var e=c[t];r[t]=o({args:["array","array"],body:{args:["a","b"],body:"a="+e+"b"},funcName:t}),r[t+"eq"]=o({args:["array"],body:{args:["a"],body:"a="+e+"a"},rvalue:!0,count:2,funcName:t+"eq"})}}();var l={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var t in l){var e=l[t];r[t]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+e+"c"},funcName:t}),r[t+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+e+"s"},funcName:t+"s"}),r[t+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a=a"+e+"b"},rvalue:!0,count:2,funcName:t+"eq"}),r[t+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+e+"s"},rvalue:!0,count:2,funcName:t+"seq"})}}();var f=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var t=0;t<f.length;++t){var e=f[t];r[e]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:e}),r[e+"eq"]=o({args:["array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"eq"})}}();var h=["max","min","atan2","pow"];!function(){for(var t=0;t<h.length;++t){var e=h[t];r[e]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:e}),r[e+"s"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:e+"s"}),r[e+"eq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"eq"}),r[e+"seq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"seq"})}}();var p=["atan2","pow"];!function(){for(var t=0;t<p.length;++t){var e=p[t];r[e+"op"]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:e+"op"}),r[e+"ops"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:e+"ops"}),r[e+"opeq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"opeq"}),r[e+"opseq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"opseq"})}}(),r.any=a({args:["array"],pre:s,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),r.all=a({args:["array"],pre:s,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),r.sum=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),r.prod=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),r.norm2squared=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),r.norm2=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),r.norminf=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),r.norm1=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),r.sup=a({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),r.inf=a({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),r.argmin=a({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),r.argmax=a({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),r.random=o({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),r.assign=o({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),r.assigns=o({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),r.equals=a({args:["array","array"],pre:s,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":44}],44:[function(t,e,r){"use strict";function n(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function i(t){var e=new n;e.pre=t.pre,e.body=t.body,e.post=t.post;var r=t.args.slice(0);e.argTypes=r;for(var i=0;i<r.length;++i){var a=r[i];if("array"===a||"object"==typeof a&&a.blockIndices){if(e.argTypes[i]="array",e.arrayArgs.push(i),e.arrayBlockIndices.push(a.blockIndices?a.blockIndices:0),e.shimArgs.push("array"+i),i<e.pre.args.length&&e.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array args");if(i<e.post.args.length&&e.post.args[i].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===a)e.scalarArgs.push(i),e.shimArgs.push("scalar"+i);else if("index"===a){if(e.indexArgs.push(i),i<e.pre.args.length&&e.pre.args[i].count>0)throw new Error("cwise: pre() block may not reference array index");if(i<e.body.args.length&&e.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array index");if(i<e.post.args.length&&e.post.args[i].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===a){if(e.shapeArgs.push(i),i<e.pre.args.length&&e.pre.args[i].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(i<e.body.args.length&&e.body.args[i].lvalue)throw new Error("cwise: body() block may not write to array shape");if(i<e.post.args.length&&e.post.args[i].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof a||!a.offset)throw new Error("cwise: Unknown argument type "+r[i]);e.argTypes[i]="offset",e.offsetArgs.push({array:a.array,offset:a.offset}),e.offsetArgIndex.push(i)}}if(e.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(e.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(e.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(e.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return e.debug=!!t.printCode||!!t.debug,e.funcName=t.funcName||"cwise",e.blockSize=t.blockSize||64,o(e)}var o=t("./lib/thunk.js");e.exports=i},{"./lib/thunk.js":46}],45:[function(t,e,r){"use strict";function n(t,e,r){var n,i,o=t.length,a=e.arrayArgs.length,s=e.indexArgs.length>0,u=[],c=[],l=0,f=0;for(n=0;o>n;++n)c.push(["i",n,"=0"].join(""));for(i=0;a>i;++i)for(n=0;o>n;++n)f=l,l=t[n],c.push(0===n?["d",i,"s",n,"=t",i,"p",l].join(""):["d",i,"s",n,"=(t",i,"p",l,"-s",f,"*t",i,"p",f,")"].join(""));for(u.push("var "+c.join(",")),n=o-1;n>=0;--n)l=t[n],u.push(["for(i",n,"=0;i",n,"<s",l,";++i",n,"){"].join(""));for(u.push(r),n=0;o>n;++n){for(f=l,l=t[n],i=0;a>i;++i)u.push(["p",i,"+=d",i,"s",n].join(""));s&&(n>0&&u.push(["index[",f,"]-=s",f].join("")),u.push(["++index[",l,"]"].join(""))),u.push("}")}return u.join("\n")}function i(t,e,r,i){for(var o=e.length,a=r.arrayArgs.length,s=r.blockSize,u=r.indexArgs.length>0,c=[],l=0;a>l;++l)c.push(["var offset",l,"=p",l].join(""));for(var l=t;o>l;++l)c.push(["for(var j"+l+"=SS[",e[l],"]|0;j",l,">0;){"].join("")),c.push(["if(j",l,"<",s,"){"].join("")),c.push(["s",e[l],"=j",l].join("")),c.push(["j",l,"=0"].join("")),c.push(["}else{s",e[l],"=",s].join("")),c.push(["j",l,"-=",s,"}"].join("")),u&&c.push(["index[",e[l],"]=j",l].join(""));for(var l=0;a>l;++l){for(var f=["offset"+l],h=t;o>h;++h)f.push(["j",h,"*t",l,"p",e[h]].join(""));c.push(["p",l,"=(",f.join("+"),")"].join(""))}c.push(n(e,r,i));for(var l=t;o>l;++l)c.push("}");return c.join("\n")}function o(t){for(var e=0,r=t[0].length;r>e;){for(var n=1;n<t.length;++n)if(t[n][e]!==t[0][e])return e;++e}return e}function a(t,e,r){for(var n=t.body,i=[],o=[],a=0;a<t.args.length;++a){var s=t.args[a];if(!(s.count<=0)){var u=new RegExp(s.name,"g"),c="",l=e.arrayArgs.indexOf(a);switch(e.argTypes[a]){case"offset":var f=e.offsetArgIndex.indexOf(a),h=e.offsetArgs[f];l=h.array,c="+q"+f;case"array":c="p"+l+c;var p="l"+a,d="a"+l;if(0===e.arrayBlockIndices[l])1===s.count?"generic"===r[l]?s.lvalue?(i.push(["var ",p,"=",d,".get(",c,")"].join("")),n=n.replace(u,p),o.push([d,".set(",c,",",p,")"].join(""))):n=n.replace(u,[d,".get(",c,")"].join("")):n=n.replace(u,[d,"[",c,"]"].join("")):"generic"===r[l]?(i.push(["var ",p,"=",d,".get(",c,")"].join("")),n=n.replace(u,p),s.lvalue&&o.push([d,".set(",c,",",p,")"].join(""))):(i.push(["var ",p,"=",d,"[",c,"]"].join("")),n=n.replace(u,p),s.lvalue&&o.push([d,"[",c,"]=",p].join("")));else{for(var v=[s.name],g=[c],m=0;m<Math.abs(e.arrayBlockIndices[l]);m++)v.push("\\s*\\[([^\\]]+)\\]"),g.push("$"+(m+1)+"*t"+l+"b"+m);if(u=new RegExp(v.join(""),"g"),c=g.join("+"),"generic"===r[l])throw new Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(u,[d,"[",c,"]"].join(""))}break;case"scalar":n=n.replace(u,"Y"+e.scalarArgs.indexOf(a));break;case"index":n=n.replace(u,"index");break;case"shape":n=n.replace(u,"shape")}}}return[i.join("\n"),n,o.join("\n")].join("\n").trim()}function s(t){for(var e=new Array(t.length),r=!0,n=0;n<t.length;++n){var i=t[n],o=i.match(/\d+/);o=o?o[0]:"",0===i.charAt(0)?e[n]="u"+i.charAt(1)+o:e[n]=i.charAt(0)+o,n>0&&(r=r&&e[n]===e[n-1])}return r?e[0]:e.join("")}function u(t,e){for(var r=e[1].length-Math.abs(t.arrayBlockIndices[0])|0,u=new Array(t.arrayArgs.length),l=new Array(t.arrayArgs.length),f=0;f<t.arrayArgs.length;++f)l[f]=e[2*f],u[f]=e[2*f+1];for(var h=[],p=[],d=[],v=[],g=[],f=0;f<t.arrayArgs.length;++f){t.arrayBlockIndices[f]<0?(d.push(0),v.push(r),h.push(r),p.push(r+t.arrayBlockIndices[f])):(d.push(t.arrayBlockIndices[f]),v.push(t.arrayBlockIndices[f]+r),h.push(0),p.push(t.arrayBlockIndices[f]));for(var m=[],y=0;y<u[f].length;y++)d[f]<=u[f][y]&&u[f][y]<v[f]&&m.push(u[f][y]-d[f]);g.push(m)}for(var b=["SS"],w=["'use strict'"],_=[],y=0;r>y;++y)_.push(["s",y,"=SS[",y,"]"].join(""));for(var f=0;f<t.arrayArgs.length;++f){b.push("a"+f),b.push("t"+f),b.push("p"+f);for(var y=0;r>y;++y)_.push(["t",f,"p",y,"=t",f,"[",d[f]+y,"]"].join(""));for(var y=0;y<Math.abs(t.arrayBlockIndices[f]);++y)_.push(["t",f,"b",y,"=t",f,"[",h[f]+y,"]"].join(""))}for(var f=0;f<t.scalarArgs.length;++f)b.push("Y"+f);if(t.shapeArgs.length>0&&_.push("shape=SS.slice(0)"),t.indexArgs.length>0){for(var A=new Array(r),f=0;r>f;++f)A[f]="0";_.push(["index=[",A.join(","),"]"].join(""))}for(var f=0;f<t.offsetArgs.length;++f){for(var M=t.offsetArgs[f],E=[],y=0;y<M.offset.length;++y)0!==M.offset[y]&&E.push(1===M.offset[y]?["t",M.array,"p",y].join(""):[M.offset[y],"*t",M.array,"p",y].join(""));_.push(0===E.length?"q"+f+"=0":["q",f,"=",E.join("+")].join(""))}var x=c([].concat(t.pre.thisVars).concat(t.body.thisVars).concat(t.post.thisVars));_=_.concat(x),w.push("var "+_.join(","));for(var f=0;f<t.arrayArgs.length;++f)w.push("p"+f+"|=0");t.pre.body.length>3&&w.push(a(t.pre,t,l));var j=a(t.body,t,l),k=o(g);w.push(r>k?i(k,g[0],t,j):n(g[0],t,j)),t.post.body.length>3&&w.push(a(t.post,t,l)),t.debug&&console.log("-----Generated cwise routine for ",e,":\n"+w.join("\n")+"\n----------");var I=[t.funcName||"unnamed","_cwise_loop_",u[0].join("s"),"m",k,s(l)].join(""),L=new Function(["function ",I,"(",b.join(","),"){",w.join("\n"),"} return ",I].join(""));return L()}var c=t("uniq");e.exports=u},{uniq:47}],46:[function(t,e,r){"use strict";function n(t){var e=["'use strict'","var CACHED={}"],r=[],n=t.funcName+"_cwise_thunk";e.push(["return function ",n,"(",t.shimArgs.join(","),"){"].join(""));for(var o=[],a=[],s=[["array",t.arrayArgs[0],".shape.slice(",Math.max(0,t.arrayBlockIndices[u]),t.arrayBlockIndices[u]<0?","+t.arrayBlockIndices[u]+")":")"].join("")],u=0;u<t.arrayArgs.length;++u){var c=t.arrayArgs[u];r.push(["t",c,"=array",c,".dtype,","r",c,"=array",c,".order"].join("")),o.push("t"+c),o.push("r"+c),a.push("t"+c),a.push("r"+c+".join()"),s.push("array"+c+".data"),s.push("array"+c+".stride"),s.push("array"+c+".offset|0")}for(var u=0;u<t.scalarArgs.length;++u)s.push("scalar"+t.scalarArgs[u]);r.push(["type=[",a.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),e.push("var "+r.join(",")),e.push(["if(!proc){","CACHED[type]=proc=compile([",o.join(","),"])}","return proc(",s.join(","),")}"].join("")),t.debug&&console.log("-----Generated thunk:\n"+e.join("\n")+"\n----------");var l=new Function("compile",e.join("\n"));return l(i.bind(void 0,t))}var i=t("./compile.js");e.exports=n},{"./compile.js":45}],47:[function(t,e,r){arguments[4][27][0].apply(r,arguments)},{dup:27}],48:[function(t,e,r){(function(r){function n(t,e){return t[0]-e[0]}function i(){var t,e=this.stride,r=new Array(e.length);for(t=0;t<r.length;++t)r[t]=[Math.abs(e[t]),t];r.sort(n);var i=new Array(r.length);for(t=0;t<i.length;++t)i[t]=r[t][1];return i}function o(t,e){var r=["View",e,"d",t].join("");0>e&&(r="View_Nil"+t);var n="generic"===t;if(-1===e){var o="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}",a=new Function(o);return a()}if(0===e){var o="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(n?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(n?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}",a=new Function("TrivialArray",o);return a(f[t][0])}var o=["'use strict'"],s=u(e),c=s.map(function(t){return"i"+t}),l="this.offset+"+s.map(function(t){return"this.stride["+t+"]*i"+t}).join("+"),h=s.map(function(t){return"b"+t}).join(","),p=s.map(function(t){return"c"+t}).join(",");o.push("function "+r+"(a,"+h+","+p+",d){this.data=a","this.shape=["+h+"]","this.stride=["+p+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+t+"'","proto.dimension="+e),o.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+s.map(function(t){return"this.shape["+t+"]"}).join("*"),"}})"),1===e?o.push("proto.order=[0]"):(o.push("Object.defineProperty(proto,'order',{get:"),4>e?(o.push("function "+r+"_order(){"),2===e?o.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===e&&o.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):o.push("ORDER})")),o.push("proto.set=function "+r+"_set("+c.join(",")+",v){"),o.push(n?"return this.data.set("+l+",v)}":"return this.data["+l+"]=v}"),o.push("proto.get=function "+r+"_get("+c.join(",")+"){"),o.push(n?"return this.data.get("+l+")}":"return this.data["+l+"]}"),o.push("proto.index=function "+r+"_index(",c.join(),"){return "+l+"}"),o.push("proto.hi=function "+r+"_hi("+c.join(",")+"){return new "+r+"(this.data,"+s.map(function(t){return["(typeof i",t,"!=='number'||i",t,"<0)?this.shape[",t,"]:i",t,"|0"].join("")}).join(",")+","+s.map(function(t){return"this.stride["+t+"]"}).join(",")+",this.offset)}");var d=s.map(function(t){return"a"+t+"=this.shape["+t+"]"}),v=s.map(function(t){return"c"+t+"=this.stride["+t+"]"});o.push("proto.lo=function "+r+"_lo("+c.join(",")+"){var b=this.offset,d=0,"+d.join(",")+","+v.join(","));for(var g=0;e>g;++g)o.push("if(typeof i"+g+"==='number'&&i"+g+">=0){d=i"+g+"|0;b+=c"+g+"*d;a"+g+"-=d}");o.push("return new "+r+"(this.data,"+s.map(function(t){return"a"+t}).join(",")+","+s.map(function(t){return"c"+t}).join(",")+",b)}"),o.push("proto.step=function "+r+"_step("+c.join(",")+"){var "+s.map(function(t){return"a"+t+"=this.shape["+t+"]"}).join(",")+","+s.map(function(t){return"b"+t+"=this.stride["+t+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var g=0;e>g;++g)o.push("if(typeof i"+g+"==='number'){d=i"+g+"|0;if(d<0){c+=b"+g+"*(a"+g+"-1);a"+g+"=ceil(-a"+g+"/d)}else{a"+g+"=ceil(a"+g+"/d)}b"+g+"*=d}");o.push("return new "+r+"(this.data,"+s.map(function(t){return"a"+t}).join(",")+","+s.map(function(t){return"b"+t}).join(",")+",c)}");for(var m=new Array(e),y=new Array(e),g=0;e>g;++g)m[g]="a[i"+g+"]",y[g]="b[i"+g+"]";o.push("proto.transpose=function "+r+"_transpose("+c+"){"+c.map(function(t,e){return t+"=("+t+"===undefined?"+e+":"+t+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+m.join(",")+","+y.join(",")+",this.offset)}"),o.push("proto.pick=function "+r+"_pick("+c+"){var a=[],b=[],c=this.offset");for(var g=0;e>g;++g)o.push("if(typeof i"+g+"==='number'&&i"+g+">=0){c=(c+this.stride["+g+"]*i"+g+")|0}else{a.push(this.shape["+g+"]);b.push(this.stride["+g+"])}");o.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),o.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+s.map(function(t){return"shape["+t+"]"}).join(",")+","+s.map(function(t){return"stride["+t+"]"}).join(",")+",offset)}");var a=new Function("CTOR_LIST","ORDER",o.join("\n"));return a(f[t],i)}function a(t){if(l&&r.isBuffer(t))return"buffer";if(c)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(t)?"array":"generic"}function s(t,e,r,n){if(void 0===t){var i=f.array[0];return i([])}"number"==typeof t&&(t=[t]),void 0===e&&(e=[t.length]);var s=e.length;if(void 0===r){r=new Array(s);for(var u=s-1,c=1;u>=0;--u)r[u]=c,c*=e[u]}if(void 0===n){n=0;for(var u=0;s>u;++u)r[u]<0&&(n-=(e[u]-1)*r[u])}for(var l=a(t),h=f[l];h.length<=s+1;)h.push(o(l,h.length-1));var i=h[s+1];return i(t,e,r,n)}var u=t("iota-array"),c="undefined"!=typeof Float64Array,l="undefined"!=typeof r,f={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};e.exports=s}).call(this,t("buffer").Buffer)},{buffer:2,"iota-array":49}],49:[function(t,e,r){arguments[4][26][0].apply(r,arguments)},{dup:26}],50:[function(t,e,r){"use strict";"use restrict";function n(t){var e=32;return t&=-t,t&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}var i=32;r.INT_BITS=i,r.INT_MAX=2147483647,r.INT_MIN=-1<<i-1,r.sign=function(t){return(t>0)-(0>t)},r.abs=function(t){var e=t>>i-1;return(t^e)-e},r.min=function(t,e){return e^(t^e)&-(e>t)},r.max=function(t,e){return t^(t^e)&-(e>t)},r.isPow2=function(t){return!(t&t-1||!t)},r.log2=function(t){var e,r;return e=(t>65535)<<4,t>>>=e,r=(t>255)<<3,t>>>=r,e|=r,r=(t>15)<<2,t>>>=r,e|=r,r=(t>3)<<1,t>>>=r,e|=r,e|t>>1},r.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},r.popCount=function(t){return t-=t>>>1&1431655765,t=(858993459&t)+(t>>>2&858993459),16843009*(t+(t>>>4)&252645135)>>>24},r.countTrailingZeros=n,r.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1},r.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t-(t>>>1)},r.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,t&=15,27030>>>t&1};var o=new Array(256);!function(t){for(var e=0;256>e;++e){var r=e,n=e,i=7;for(r>>>=1;r;r>>>=1)n<<=1,n|=1&r,--i;t[e]=n<<i&255}}(o),r.reverse=function(t){return o[255&t]<<24|o[t>>>8&255]<<16|o[t>>>16&255]<<8|o[t>>>24&255]},r.interleave2=function(t,e){return t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1},r.deinterleave2=function(t,e){return t=t>>>e&1431655765,t=858993459&(t|t>>>1),t=252645135&(t|t>>>2),t=16711935&(t|t>>>4),t=65535&(t|t>>>16),t<<16>>16},r.interleave3=function(t,e,r){return t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t|=e<<1,r&=1023,r=4278190335&(r|r<<16),r=251719695&(r|r<<8),r=3272356035&(r|r<<4),r=1227133513&(r|r<<2),t|r<<2},r.deinterleave3=function(t,e){return t=t>>>e&1227133513,t=3272356035&(t|t>>>2),t=251719695&(t|t>>>4),t=4278190335&(t|t>>>8),t=1023&(t|t>>>16),t<<22>>22},r.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>n(t)+1}},{}],51:[function(t,e,r){"use strict";function n(t,e,r){var i=0|t[r];if(0>=i)return[];var o,a=new Array(i);if(r===t.length-1)for(o=0;i>o;++o)a[o]=e;else for(o=0;i>o;++o)a[o]=n(t,e,r+1);return a}function i(t,e){var r,n;for(r=new Array(t),n=0;t>n;++n)r[n]=e;return r}function o(t,e){switch("undefined"==typeof e&&(e=0),typeof t){case"number":if(t>0)return i(0|t,e);break;case"object":if("number"==typeof t.length)return n(t,e,0)}return[]}e.exports=o},{}],52:[function(t,e,r){(function(e,n){"use strict";function i(t){if(t){var e=t.length||t.byteLength,r=y.log2(e);A[r].push(t)}}function o(t){i(t.buffer)}function a(t){var t=y.nextPow2(t),e=y.log2(t),r=A[e];return r.length>0?r.pop():new ArrayBuffer(t)}function s(t){return new Uint8Array(a(t),0,t)}function u(t){return new Uint16Array(a(2*t),0,t)}function c(t){return new Uint32Array(a(4*t),0,t)}function l(t){return new Int8Array(a(t),0,t)}function f(t){return new Int16Array(a(2*t),0,t)}function h(t){return new Int32Array(a(4*t),0,t)}function p(t){return new Float32Array(a(4*t),0,t)}function d(t){return new Float64Array(a(8*t),0,t)}function v(t){return w?new Uint8ClampedArray(a(t),0,t):s(t)}function g(t){return new DataView(a(t),0,t)}function m(t){t=y.nextPow2(t);var e=y.log2(t),r=M[e];return r.length>0?r.pop():new n(t)}var y=t("bit-twiddle"),b=t("dup");e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:b([32,0]),UINT16:b([32,0]),UINT32:b([32,0]),INT8:b([32,0]),INT16:b([32,0]),INT32:b([32,0]),FLOAT:b([32,0]),DOUBLE:b([32,0]),DATA:b([32,0]),UINT8C:b([32,0]),BUFFER:b([32,0])});var w="undefined"!=typeof Uint8ClampedArray,_=e.__TYPEDARRAY_POOL;_.UINT8C||(_.UINT8C=b([32,0])),_.BUFFER||(_.BUFFER=b([32,0]));var A=_.DATA,M=_.BUFFER;r.free=function(t){if(n.isBuffer(t))M[y.log2(t.length)].push(t);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(t)&&(t=t.buffer),!t)return;var e=t.length||t.byteLength,r=0|y.log2(e);A[r].push(t)}},r.freeUint8=r.freeUint16=r.freeUint32=r.freeInt8=r.freeInt16=r.freeInt32=r.freeFloat32=r.freeFloat=r.freeFloat64=r.freeDouble=r.freeUint8Clamped=r.freeDataView=o,r.freeArrayBuffer=i,r.freeBuffer=function(t){M[y.log2(t.length)].push(t)},r.malloc=function(t,e){if(void 0===e||"arraybuffer"===e)return a(t);switch(e){case"uint8":return s(t);case"uint16":return u(t);case"uint32":return c(t);case"int8":return l(t);case"int16":return f(t);case"int32":return h(t);case"float":case"float32":return p(t);
case"double":case"float64":return d(t);case"uint8_clamped":return v(t);case"buffer":return m(t);case"data":case"dataview":return g(t);default:return null}return null},r.mallocArrayBuffer=a,r.mallocUint8=s,r.mallocUint16=u,r.mallocUint32=c,r.mallocInt8=l,r.mallocInt16=f,r.mallocInt32=h,r.mallocFloat32=r.mallocFloat=p,r.mallocFloat64=r.mallocDouble=d,r.mallocUint8Clamped=v,r.mallocDataView=g,r.mallocBuffer=m,r.clearCache=function(){for(var t=0;32>t;++t)_.UINT8[t].length=0,_.UINT16[t].length=0,_.UINT32[t].length=0,_.INT8[t].length=0,_.INT16[t].length=0,_.INT32[t].length=0,_.FLOAT[t].length=0,_.DOUBLE[t].length=0,_.UINT8C[t].length=0,A[t].length=0,M[t].length=0}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer)},{"bit-twiddle":50,buffer:2,dup:51}],53:[function(t,e,r){arguments[4][30][0].apply(r,arguments)},{dup:30}],54:[function(t,e,r){arguments[4][31][0].apply(r,arguments)},{dup:31,"weak-map":53}],55:[function(t,e,r){function n(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],h=e[10],p=e[11],d=e[12],v=e[13],g=e[14],m=e[15];return t[0]=s*(h*m-p*g)-f*(u*m-c*g)+v*(u*p-c*h),t[1]=-(n*(h*m-p*g)-f*(i*m-o*g)+v*(i*p-o*h)),t[2]=n*(u*m-c*g)-s*(i*m-o*g)+v*(i*c-o*u),t[3]=-(n*(u*p-c*h)-s*(i*p-o*h)+f*(i*c-o*u)),t[4]=-(a*(h*m-p*g)-l*(u*m-c*g)+d*(u*p-c*h)),t[5]=r*(h*m-p*g)-l*(i*m-o*g)+d*(i*p-o*h),t[6]=-(r*(u*m-c*g)-a*(i*m-o*g)+d*(i*c-o*u)),t[7]=r*(u*p-c*h)-a*(i*p-o*h)+l*(i*c-o*u),t[8]=a*(f*m-p*v)-l*(s*m-c*v)+d*(s*p-c*f),t[9]=-(r*(f*m-p*v)-l*(n*m-o*v)+d*(n*p-o*f)),t[10]=r*(s*m-c*v)-a*(n*m-o*v)+d*(n*c-o*s),t[11]=-(r*(s*p-c*f)-a*(n*p-o*f)+l*(n*c-o*s)),t[12]=-(a*(f*g-h*v)-l*(s*g-u*v)+d*(s*h-u*f)),t[13]=r*(f*g-h*v)-l*(n*g-i*v)+d*(n*h-i*f),t[14]=-(r*(s*g-u*v)-a*(n*g-i*v)+d*(n*u-i*s)),t[15]=r*(s*h-u*f)-a*(n*h-i*f)+l*(n*u-i*s),t}e.exports=n},{}],56:[function(t,e,r){function n(t){var e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}e.exports=n},{}],57:[function(t,e,r){function n(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}e.exports=n},{}],58:[function(t,e,r){function n(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}e.exports=n},{}],59:[function(t,e,r){function n(t){var e=t[0],r=t[1],n=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],l=t[9],f=t[10],h=t[11],p=t[12],d=t[13],v=t[14],g=t[15],m=e*a-r*o,y=e*s-n*o,b=e*u-i*o,w=r*s-n*a,_=r*u-i*a,A=n*u-i*s,M=c*d-l*p,E=c*v-f*p,x=c*g-h*p,j=l*v-f*d,k=l*g-h*d,I=f*g-h*v;return m*I-y*k+b*j+w*x-_*E+A*M}e.exports=n},{}],60:[function(t,e,r){function n(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r+r,s=n+n,u=i+i,c=r*a,l=n*a,f=n*s,h=i*a,p=i*s,d=i*u,v=o*a,g=o*s,m=o*u;return t[0]=1-f-d,t[1]=l+m,t[2]=h-g,t[3]=0,t[4]=l-m,t[5]=1-c-d,t[6]=p+v,t[7]=0,t[8]=h+g,t[9]=p-v,t[10]=1-c-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}e.exports=n},{}],61:[function(t,e,r){function n(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=n+n,u=i+i,c=o+o,l=n*s,f=n*u,h=n*c,p=i*u,d=i*c,v=o*c,g=a*s,m=a*u,y=a*c;return t[0]=1-(p+v),t[1]=f+y,t[2]=h-m,t[3]=0,t[4]=f-y,t[5]=1-(l+v),t[6]=d+g,t[7]=0,t[8]=h+m,t[9]=d-g,t[10]=1-(l+p),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}e.exports=n},{}],62:[function(t,e,r){function n(t,e,r,n,i,o,a){var s=1/(r-e),u=1/(i-n),c=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(r+e)*s,t[9]=(i+n)*u,t[10]=(a+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*c,t[15]=0,t}e.exports=n},{}],63:[function(t,e,r){function n(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}e.exports=n},{}],64:[function(t,e,r){e.exports={create:t("./create"),clone:t("./clone"),copy:t("./copy"),identity:t("./identity"),transpose:t("./transpose"),invert:t("./invert"),adjoint:t("./adjoint"),determinant:t("./determinant"),multiply:t("./multiply"),translate:t("./translate"),scale:t("./scale"),rotate:t("./rotate"),rotateX:t("./rotateX"),rotateY:t("./rotateY"),rotateZ:t("./rotateZ"),fromRotationTranslation:t("./fromRotationTranslation"),fromQuat:t("./fromQuat"),frustum:t("./frustum"),perspective:t("./perspective"),perspectiveFromFieldOfView:t("./perspectiveFromFieldOfView"),ortho:t("./ortho"),lookAt:t("./lookAt"),str:t("./str")}},{"./adjoint":55,"./clone":56,"./copy":57,"./create":58,"./determinant":59,"./fromQuat":60,"./fromRotationTranslation":61,"./frustum":62,"./identity":63,"./invert":65,"./lookAt":66,"./multiply":67,"./ortho":68,"./perspective":69,"./perspectiveFromFieldOfView":70,"./rotate":71,"./rotateX":72,"./rotateY":73,"./rotateZ":74,"./scale":75,"./str":76,"./translate":77,"./transpose":78}],65:[function(t,e,r){function n(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],l=e[8],f=e[9],h=e[10],p=e[11],d=e[12],v=e[13],g=e[14],m=e[15],y=r*s-n*a,b=r*u-i*a,w=r*c-o*a,_=n*u-i*s,A=n*c-o*s,M=i*c-o*u,E=l*v-f*d,x=l*g-h*d,j=l*m-p*d,k=f*g-h*v,I=f*m-p*v,L=h*m-p*g,S=y*L-b*I+w*k+_*j-A*x+M*E;return S?(S=1/S,t[0]=(s*L-u*I+c*k)*S,t[1]=(i*I-n*L-o*k)*S,t[2]=(v*M-g*A+m*_)*S,t[3]=(h*A-f*M-p*_)*S,t[4]=(u*j-a*L-c*x)*S,t[5]=(r*L-i*j+o*x)*S,t[6]=(g*w-d*M-m*b)*S,t[7]=(l*M-h*w+p*b)*S,t[8]=(a*I-s*j+c*E)*S,t[9]=(n*j-r*I-o*E)*S,t[10]=(d*A-v*w+m*y)*S,t[11]=(f*w-l*A-p*y)*S,t[12]=(s*x-a*k-u*E)*S,t[13]=(r*k-n*x+i*E)*S,t[14]=(v*b-d*_-g*y)*S,t[15]=(l*_-f*b+h*y)*S,t):null}e.exports=n},{}],66:[function(t,e,r){function n(t,e,r,n){var o,a,s,u,c,l,f,h,p,d,v=e[0],g=e[1],m=e[2],y=n[0],b=n[1],w=n[2],_=r[0],A=r[1],M=r[2];return Math.abs(v-_)<1e-6&&Math.abs(g-A)<1e-6&&Math.abs(m-M)<1e-6?i(t):(f=v-_,h=g-A,p=m-M,d=1/Math.sqrt(f*f+h*h+p*p),f*=d,h*=d,p*=d,o=b*p-w*h,a=w*f-y*p,s=y*h-b*f,d=Math.sqrt(o*o+a*a+s*s),d?(d=1/d,o*=d,a*=d,s*=d):(o=0,a=0,s=0),u=h*s-p*a,c=p*o-f*s,l=f*a-h*o,d=Math.sqrt(u*u+c*c+l*l),d?(d=1/d,u*=d,c*=d,l*=d):(u=0,c=0,l=0),t[0]=o,t[1]=u,t[2]=f,t[3]=0,t[4]=a,t[5]=c,t[6]=h,t[7]=0,t[8]=s,t[9]=l,t[10]=p,t[11]=0,t[12]=-(o*v+a*g+s*m),t[13]=-(u*v+c*g+l*m),t[14]=-(f*v+h*g+p*m),t[15]=1,t)}var i=t("./identity");e.exports=n},{"./identity":63}],67:[function(t,e,r){function n(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=e[9],p=e[10],d=e[11],v=e[12],g=e[13],m=e[14],y=e[15],b=r[0],w=r[1],_=r[2],A=r[3];return t[0]=b*n+w*s+_*f+A*v,t[1]=b*i+w*u+_*h+A*g,t[2]=b*o+w*c+_*p+A*m,t[3]=b*a+w*l+_*d+A*y,b=r[4],w=r[5],_=r[6],A=r[7],t[4]=b*n+w*s+_*f+A*v,t[5]=b*i+w*u+_*h+A*g,t[6]=b*o+w*c+_*p+A*m,t[7]=b*a+w*l+_*d+A*y,b=r[8],w=r[9],_=r[10],A=r[11],t[8]=b*n+w*s+_*f+A*v,t[9]=b*i+w*u+_*h+A*g,t[10]=b*o+w*c+_*p+A*m,t[11]=b*a+w*l+_*d+A*y,b=r[12],w=r[13],_=r[14],A=r[15],t[12]=b*n+w*s+_*f+A*v,t[13]=b*i+w*u+_*h+A*g,t[14]=b*o+w*c+_*p+A*m,t[15]=b*a+w*l+_*d+A*y,t}e.exports=n},{}],68:[function(t,e,r){function n(t,e,r,n,i,o,a){var s=1/(e-r),u=1/(n-i),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+r)*s,t[13]=(i+n)*u,t[14]=(a+o)*c,t[15]=1,t}e.exports=n},{}],69:[function(t,e,r){function n(t,e,r,n,i){var o=1/Math.tan(e/2),a=1/(n-i);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+n)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*n*a,t[15]=0,t}e.exports=n},{}],70:[function(t,e,r){function n(t,e,r,n){var i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(a+s),c=2/(i+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-((a-s)*u*.5),t[9]=(i-o)*c*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t}e.exports=n},{}],71:[function(t,e,r){function n(t,e,r,n){var i,o,a,s,u,c,l,f,h,p,d,v,g,m,y,b,w,_,A,M,E,x,j,k,I=n[0],L=n[1],S=n[2],T=Math.sqrt(I*I+L*L+S*S);return Math.abs(T)<1e-6?null:(T=1/T,I*=T,L*=T,S*=T,i=Math.sin(r),o=Math.cos(r),a=1-o,s=e[0],u=e[1],c=e[2],l=e[3],f=e[4],h=e[5],p=e[6],d=e[7],v=e[8],g=e[9],m=e[10],y=e[11],b=I*I*a+o,w=L*I*a+S*i,_=S*I*a-L*i,A=I*L*a-S*i,M=L*L*a+o,E=S*L*a+I*i,x=I*S*a+L*i,j=L*S*a-I*i,k=S*S*a+o,t[0]=s*b+f*w+v*_,t[1]=u*b+h*w+g*_,t[2]=c*b+p*w+m*_,t[3]=l*b+d*w+y*_,t[4]=s*A+f*M+v*E,t[5]=u*A+h*M+g*E,t[6]=c*A+p*M+m*E,t[7]=l*A+d*M+y*E,t[8]=s*x+f*j+v*k,t[9]=u*x+h*j+g*k,t[10]=c*x+p*j+m*k,t[11]=l*x+d*j+y*k,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}e.exports=n},{}],72:[function(t,e,r){function n(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[4],a=e[5],s=e[6],u=e[7],c=e[8],l=e[9],f=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+c*n,t[5]=a*i+l*n,t[6]=s*i+f*n,t[7]=u*i+h*n,t[8]=c*i-o*n,t[9]=l*i-a*n,t[10]=f*i-s*n,t[11]=h*i-u*n,t}e.exports=n},{}],73:[function(t,e,r){function n(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[0],a=e[1],s=e[2],u=e[3],c=e[8],l=e[9],f=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-c*n,t[1]=a*i-l*n,t[2]=s*i-f*n,t[3]=u*i-h*n,t[8]=o*n+c*i,t[9]=a*n+l*i,t[10]=s*n+f*i,t[11]=u*n+h*i,t}e.exports=n},{}],74:[function(t,e,r){function n(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[0],a=e[1],s=e[2],u=e[3],c=e[4],l=e[5],f=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+c*n,t[1]=a*i+l*n,t[2]=s*i+f*n,t[3]=u*i+h*n,t[4]=c*i-o*n,t[5]=l*i-a*n,t[6]=f*i-s*n,t[7]=h*i-u*n,t}e.exports=n},{}],75:[function(t,e,r){function n(t,e,r){var n=r[0],i=r[1],o=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}e.exports=n},{}],76:[function(t,e,r){function n(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}e.exports=n},{}],77:[function(t,e,r){function n(t,e,r){var n,i,o,a,s,u,c,l,f,h,p,d,v=r[0],g=r[1],m=r[2];return e===t?(t[12]=e[0]*v+e[4]*g+e[8]*m+e[12],t[13]=e[1]*v+e[5]*g+e[9]*m+e[13],t[14]=e[2]*v+e[6]*g+e[10]*m+e[14],t[15]=e[3]*v+e[7]*g+e[11]*m+e[15]):(n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],l=e[7],f=e[8],h=e[9],p=e[10],d=e[11],t[0]=n,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=c,t[7]=l,t[8]=f,t[9]=h,t[10]=p,t[11]=d,t[12]=n*v+s*g+f*m+e[12],t[13]=i*v+u*g+h*m+e[13],t[14]=o*v+c*g+p*m+e[14],t[15]=a*v+l*g+d*m+e[15]),t}e.exports=n},{}],78:[function(t,e,r){function n(t,e){if(t===e){var r=e[1],n=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}e.exports=n},{}],79:[function(t,e,r){"use strict";function n(t,e,r){e?e.bind():t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null);var n=0|t.getParameter(t.MAX_VERTEX_ATTRIBS);if(r){if(r.length>n)throw new Error("gl-vao: Too many vertex attributes");for(var i=0;i<r.length;++i){var o=r[i];if(o.buffer){var a=o.buffer,s=o.size||4,u=o.type||t.FLOAT,c=!!o.normalized,l=o.stride||0,f=o.offset||0;a.bind(),t.enableVertexAttribArray(i),t.vertexAttribPointer(i,s,u,c,l,f)}else{if("number"==typeof o)t.vertexAttrib1f(i,o);else if(1===o.length)t.vertexAttrib1f(i,o[0]);else if(2===o.length)t.vertexAttrib2f(i,o[0],o[1]);else if(3===o.length)t.vertexAttrib3f(i,o[0],o[1],o[2]);else{if(4!==o.length)throw new Error("gl-vao: Invalid vertex attribute");t.vertexAttrib4f(i,o[0],o[1],o[2],o[3])}t.disableVertexAttribArray(i)}}for(;n>i;++i)t.disableVertexAttribArray(i)}else{t.bindBuffer(t.ARRAY_BUFFER,null);for(var i=0;n>i;++i)t.disableVertexAttribArray(i)}}e.exports=n},{}],80:[function(t,e,r){"use strict";function n(t){this.gl=t,this._elements=null,this._attributes=null,this._elementsType=t.UNSIGNED_SHORT}function i(t){return new n(t)}var o=t("./do-bind.js");n.prototype.bind=function(){o(this.gl,this._elements,this._attributes)},n.prototype.update=function(t,e,r){this._elements=e,this._attributes=t,this._elementsType=r||this.gl.UNSIGNED_SHORT},n.prototype.dispose=function(){},n.prototype.unbind=function(){},n.prototype.draw=function(t,e,r){r=r||0;var n=this.gl;this._elements?n.drawElements(t,e,this._elementsType,r):n.drawArrays(t,r,e)},e.exports=i},{"./do-bind.js":79}],81:[function(t,e,r){"use strict";function n(t,e,r,n,i,o){this.location=t,this.dimension=e,this.a=r,this.b=n,this.c=i,this.d=o}function i(t,e,r){this.gl=t,this._ext=e,this.handle=r,this._attribs=[],this._useElements=!1,this._elementsType=t.UNSIGNED_SHORT}function o(t,e){return new i(t,e,e.createVertexArrayOES())}var a=t("./do-bind.js");n.prototype.bind=function(t){switch(this.dimension){case 1:t.vertexAttrib1f(this.location,this.a);break;case 2:t.vertexAttrib2f(this.location,this.a,this.b);break;case 3:t.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:t.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},i.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var t=0;t<this._attribs.length;++t)this._attribs[t].bind(this.gl)},i.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},i.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},i.prototype.update=function(t,e,r){if(this.bind(),a(this.gl,e,t),this.unbind(),this._attribs.length=0,t)for(var i=0;i<t.length;++i){var o=t[i];"number"==typeof o?this._attribs.push(new n(i,1,o)):Array.isArray(o)&&this._attribs.push(new n(i,o.length,o[0],o[1],o[2],o[3]))}this._useElements=!!e,this._elementsType=r||this.gl.UNSIGNED_SHORT},i.prototype.draw=function(t,e,r){r=r||0;var n=this.gl;this._useElements?n.drawElements(t,e,this._elementsType,r):n.drawArrays(t,r,e)},e.exports=o},{"./do-bind.js":79}],82:[function(t,e,r){arguments[4][30][0].apply(r,arguments)},{dup:30}],83:[function(t,e,r){arguments[4][31][0].apply(r,arguments)},{dup:31,"weak-map":82}],84:[function(t,e,r){"use strict";function n(t,e,r,n){var s,u=i(t).OES_vertex_array_object;return s=u?o(t,u):a(t),s.update(e,r,n),s}var i=t("webglew"),o=t("./lib/vao-native.js"),a=t("./lib/vao-emulated.js");e.exports=n},{"./lib/vao-emulated.js":80,"./lib/vao-native.js":81,webglew:83}],85:[function(t,e,r){function n(t,e,r,n){return function(o){return i(o,t,e,r,n)}}e.exports=n;var i=t("gl-shader-core")},{"gl-shader-core":91}],86:[function(t,e,r){function n(){throw new Error("You should bundle your code using `glslify` as a transform.")}e.exports=n},{}],87:[function(t,e,r){"use strict";function n(t,e,r,n,i,o,a){this._gl=t,this._program=e,this._location=r,this._dimension=n,this._name=i,this._constFunc=o,this._relink=a}function i(t,e,r,i,o,a,s){for(var u=["gl","v"],c=[],l=0;i>l;++l)u.push("x"+l),c.push("x"+l);u.push(["if(x0.length===void 0){return gl.vertexAttrib",i,"f(v,",c.join(),")}else{return gl.vertexAttrib",i,"fv(v,x0)}"].join(""));var f=Function.apply(void 0,u),h=new n(t,e,r,i,a,f,s);Object.defineProperty(o,a,{set:function(e){return t.disableVertexAttribArray(h._location),f(t,h._location,e),e},get:function(){return h},enumerable:!0})}function o(t,e,r,n){for(var o={},a=0,s=r.length;s>a;++a){var u=r[a],c=u.name,l=u.type,f=t.getAttribLocation(e,c);switch(l){case"bool":case"int":case"float":i(t,e,f,1,o,c,n);break;default:if(!(l.indexOf("vec")>=0))throw new Error("gl-shader: Unknown data type for attribute "+c+": "+l);var h=l.charCodeAt(l.length-1)-48;if(2>h||h>4)throw new Error("gl-shader: Invalid data type for attribute "+c+": "+l);i(t,e,f,h,o,c,n)}}return o}e.exports=o;var a=n.prototype;a.pointer=function(t,e,r,n){var i=this._gl;i.vertexAttribPointer(this._location,this._dimension,t||i.FLOAT,!!e,r||0,n||0),this._gl.enableVertexAttribArray(this._location)},Object.defineProperty(a,"location",{get:function(){return this._location},set:function(t){t!==this._location&&(this._location=t,this._gl.bindAttribLocation(this._program,t,this._name),this._gl.linkProgram(this._program),this._relink())}})},{}],88:[function(t,e,r){"use strict";function n(t){var e=new Function("y","return function(){return y}");return e(t)}function i(t,e,r,i){function s(r){var n=new Function("gl","prog","locations","return function(){return gl.getUniform(prog,locations["+r+"])}");return n(t,e,i)}function u(t,e,r){switch(r){case"bool":case"int":case"sampler2D":case"samplerCube":return"gl.uniform1i(locations["+e+"],obj"+t+")";case"float":return"gl.uniform1f(locations["+e+"],obj"+t+")";default:var n=r.indexOf("vec");if(!(n>=0&&1>=n&&r.length===4+n)){if(0===r.indexOf("mat")&&4===r.length){var i=r.charCodeAt(r.length-1)-48;if(2>i||i>4)throw new Error("gl-shader: Invalid uniform dimension type for matrix "+name+": "+r);return"gl.uniformMatrix"+i+"fv(locations["+e+"],false,obj"+t+")"}throw new Error("gl-shader: Unknown uniform data type for "+name+": "+r)}var i=r.charCodeAt(r.length-1)-48;if(2>i||i>4)throw new Error("gl-shader: Invalid data type");switch(r.charAt(0)){case"b":case"i":return"gl.uniform"+i+"iv(locations["+e+"],obj"+t+")";case"v":return"gl.uniform"+i+"fv(locations["+e+"],obj"+t+")";default:throw new Error("gl-shader: Unrecognized data type for vector "+name+": "+r)}}}function c(t,e){if("object"!=typeof e)return[[t,e]];var r=[];for(var n in e){var i=e[n],o=t;o+=parseInt(n)+""===n?"["+n+"]":"."+n,"object"==typeof i?r.push.apply(r,c(o,i)):r.push([o,i])}return r}function l(n){for(var o=["return function updateProperty(obj){"],a=c("",n),s=0;s<a.length;++s){var l=a[s],f=l[0],h=l[1];i[h]&&o.push(u(f,h,r[h].type))}o.push("return obj}");var p=new Function("gl","prog","locations",o.join("\n"));return p(t,e,i)}function f(t){switch(t){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var e=t.indexOf("vec");if(e>=0&&1>=e&&t.length===4+e){var r=t.charCodeAt(t.length-1)-48;if(2>r||r>4)throw new Error("gl-shader: Invalid data type");return"b"===t.charAt(0)?o(r,!1):o(r)}if(0===t.indexOf("mat")&&4===t.length){var r=t.charCodeAt(t.length-1)-48;if(2>r||r>4)throw new Error("gl-shader: Invalid uniform dimension type for matrix "+name+": "+t);return o([r,r])}throw new Error("gl-shader: Unknown uniform data type for "+name+": "+t)}}function h(t,e,o){if("object"==typeof o){var a=p(o);Object.defineProperty(t,e,{get:n(a),set:l(o),enumerable:!0,configurable:!1})}else i[o]?Object.defineProperty(t,e,{get:s(o),set:l(o),enumerable:!0,configurable:!1}):t[e]=f(r[o].type)}function p(t){var e;if(Array.isArray(t)){e=new Array(t.length);for(var r=0;r<t.length;++r)h(e,r,t[r])}else{e={};for(var n in t)h(e,n,t[n])}return e}var d=a(r,!0);return{get:n(p(d)),set:l(d),enumerable:!0,configurable:!0}}var o=t("dup"),a=t("./reflect");e.exports=i},{"./reflect":89,dup:90}],89:[function(t,e,r){"use strict";function n(t,e){for(var r={},n=0;n<t.length;++n)for(var i=t[n].name,o=i.split("."),a=r,s=0;s<o.length;++s){var u=o[s].split("[");if(u.length>1){u[0]in a||(a[u[0]]=[]),a=a[u[0]];for(var c=1;c<u.length;++c){var l=parseInt(u[c]);c<u.length-1||s<o.length-1?(l in a||(c<u.length-1?a[l]=[]:a[l]={}),a=a[l]):e?a[l]=n:a[l]=t[n].type}}else s<o.length-1?(u[0]in a||(a[u[0]]={}),a=a[u[0]]):e?a[u[0]]=n:a[u[0]]=t[n].type}return r}e.exports=n},{}],90:[function(t,e,r){arguments[4][51][0].apply(r,arguments)},{dup:51}],91:[function(t,e,r){"use strict";function n(t,e,r,n){this.gl=t,this.handle=e,this.attributes=null,this.uniforms=null,this.types=null,this.vertexShader=r,this.fragmentShader=n}function i(t,e,r,n){for(var i=0;i<n.length;++i)r[i]=t.getUniformLocation(e,n[i].name)}function o(t,e,r,i,o){var a=t.createShader(t.VERTEX_SHADER);if(t.shaderSource(a,e),t.compileShader(a),!t.getShaderParameter(a,t.COMPILE_STATUS)){var s=t.getShaderInfoLog(a);throw console.error("gl-shader: Error compling vertex shader:",s),new Error("gl-shader: Error compiling vertex shader:"+s)}var u=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(u,r),t.compileShader(u),!t.getShaderParameter(u,t.COMPILE_STATUS)){var s=t.getShaderInfoLog(u);throw console.error("gl-shader: Error compiling fragment shader:",s),new Error("gl-shader: Error compiling fragment shader:"+s)}var c=t.createProgram();if(t.attachShader(c,u),t.attachShader(c,a),o.forEach(function(e){"number"==typeof e.location&&t.bindAttribLocation(c,e.location,e.name)}),t.linkProgram(c),!t.getProgramParameter(c,t.LINK_STATUS)){var s=t.getProgramInfoLog(c);throw console.error("gl-shader: Error linking shader program:",s),new Error("gl-shader: Error linking shader program:"+s)}var l=new n(t,c,a,u);return l.updateExports(i,o),l}var a=t("./lib/create-uniforms"),s=t("./lib/create-attributes"),u=t("./lib/reflect");n.prototype.bind=function(){this.gl.useProgram(this.handle)},n.prototype.dispose=function(){var t=this.gl;t.deleteShader(this.vertexShader),t.deleteShader(this.fragmentShader),t.deleteProgram(this.handle)},n.prototype.updateExports=function(t,e){var r=new Array(t.length),n=this.handle,o=this.gl,c=i.bind(void 0,o,n,r,t);c(),this.types={uniforms:u(t),attributes:u(e)},this.attributes=s(o,n,e,c),Object.defineProperty(this,"uniforms",a(o,n,t,r))},e.exports=o},{"./lib/create-attributes":87,"./lib/create-uniforms":88,"./lib/reflect":89}],92:[function(t,e,r){var n=1e-6;r.vertexNormals=function(t,e){for(var r=e.length,i=new Array(r),o=0;r>o;++o)i[o]=[0,0,0];for(var o=0;o<t.length;++o)for(var a=t[o],s=0,u=a[a.length-1],c=a[0],l=0;l<a.length;++l){s=u,u=c,c=a[(l+1)%a.length];for(var f=e[s],h=e[u],p=e[c],d=new Array(3),v=0,g=new Array(3),m=0,y=0;3>y;++y)d[y]=f[y]-h[y],v+=d[y]*d[y],g[y]=p[y]-h[y],m+=g[y]*g[y];if(v*m>n)for(var b=i[u],w=1/Math.sqrt(v*m),y=0;3>y;++y){var _=(y+1)%3,A=(y+2)%3;b[y]+=w*(g[_]*d[A]-g[A]*d[_])}}for(var o=0;r>o;++o){for(var b=i[o],M=0,y=0;3>y;++y)M+=b[y]*b[y];if(M>n)for(var w=1/Math.sqrt(M),y=0;3>y;++y)b[y]*=w;else for(var y=0;3>y;++y)b[y]=0}return i},r.faceNormals=function(t,e){for(var r=t.length,i=new Array(r),o=0;r>o;++o){for(var a=t[o],s=new Array(3),u=0;3>u;++u)s[u]=e[a[u]];for(var c=new Array(3),l=new Array(3),u=0;3>u;++u)c[u]=s[1][u]-s[0][u],l[u]=s[2][u]-s[0][u];for(var f=new Array(3),h=0,u=0;3>u;++u){var p=(u+1)%3,d=(u+2)%3;f[u]=c[p]*l[d]-c[d]*l[p],h+=f[u]*f[u]}h=h>n?1/Math.sqrt(h):0;for(var u=0;3>u;++u)f[u]*=h;i[o]=f}return i}},{}],93:[function(t,e,r){"use strict";function n(t,e,r,n,s){i.length<n.length&&(i=new Float64Array(n.length),o=new Float64Array(n.length),a=new Float64Array(n.length));for(var u=0;u<n.length;++u)i[u]=t[u]-n[u],o[u]=e[u]-t[u],a[u]=r[u]-t[u];for(var c=0,l=0,f=0,h=0,p=0,d=0,u=0;u<n.length;++u){var v=o[u],g=a[u],m=i[u];c+=v*v,l+=v*g,f+=g*g,h+=m*v,p+=m*g,d+=m*m}var y,b=Math.abs(c*f-l*l),w=l*p-f*h,_=l*h-c*p;if(b>=w+_)if(0>w)0>_&&0>h?(_=0,-h>=c?(w=1,y=c+2*h+d):(w=-h/c,y=h*w+d)):(w=0,p>=0?(_=0,y=d):-p>=f?(_=1,y=f+2*p+d):(_=-p/f,y=p*_+d));else if(0>_)_=0,h>=0?(w=0,y=d):-h>=c?(w=1,y=c+2*h+d):(w=-h/c,y=h*w+d);else{var A=1/b;w*=A,_*=A,y=w*(c*w+l*_+2*h)+_*(l*w+f*_+2*p)+d}else{var M,E,x,j;0>w?(M=l+h,E=f+p,E>M?(x=E-M,j=c-2*l+f,x>=j?(w=1,_=0,y=c+2*h+d):(w=x/j,_=1-w,y=w*(c*w+l*_+2*h)+_*(l*w+f*_+2*p)+d)):(w=0,0>=E?(_=1,y=f+2*p+d):p>=0?(_=0,y=d):(_=-p/f,y=p*_+d))):0>_?(M=l+p,E=c+h,E>M?(x=E-M,j=c-2*l+f,x>=j?(_=1,w=0,y=f+2*p+d):(_=x/j,w=1-_,y=w*(c*w+l*_+2*h)+_*(l*w+f*_+2*p)+d)):(_=0,0>=E?(w=1,y=c+2*h+d):h>=0?(w=0,y=d):(w=-h/c,y=h*w+d))):(x=f+p-l-h,0>=x?(w=0,_=1,y=f+2*p+d):(j=c-2*l+f,x>=j?(w=1,_=0,y=c+2*h+d):(w=x/j,_=1-w,y=w*(c*w+l*_+2*h)+_*(l*w+f*_+2*p)+d)))}for(var k=1-w-_,u=0;u<n.length;++u)s[u]=k*t[u]+w*e[u]+_*r[u];return 0>y?0:y}var i=new Float64Array(4),o=new Float64Array(4),a=new Float64Array(4);e.exports=n},{}],94:[function(t,e,r){"use strict";function n(t,e,r){this.shell=t,this.mesh=e,this.modelMatrix=r}function i(t){function e(e){var i=s(r.gl,{cells:e.cells,positions:e.positions,vertexColors:e.vertexColors,cellColors:e.cellColors,meshColor:e.meshColor||t.meshColor,vertexNormals:e.vertexNormals,cellNormals:e.cellNormals,useCellNormals:e.useCellNormals||t.useCellNormals,pointSizes:e.pointSizes,pointSize:e.pointSize||t.pointSize||1});return new n(r,i,e.model||c.identity(c.create()))}t=t||{},t.tickRate=t.tickRate||1;var r=o(t),i=a(r);return r.camera=i,r.fov=t.fov||Math.PI/4,r.zNear=t.zNear||.1,r.zFar=t.zFar||1e3,r.createMesh=e,r.on("gl-init",function(){var t=r.gl;t.enable(t.DEPTH_TEST),r.emit("viewer-init")}),r._defaultOptions=t,r}var o=t("gl-now"),a=t("game-shell-orbit-camera"),s=t("gl-simplicial-complex"),u=t("gl-matrix"),c=u.mat4;n.prototype.update=function(t){var e=shell._defaultOptions;this.mesh.update({cells:t.cells,positions:t.positions,vertexColors:t.vertexColors,cellColors:t.cellColors,meshColor:t.meshColor||e.meshColor,vertexNormals:t.vertexNormals,cellNormals:t.cellNormals,useFacetNormals:t.useFacetNormals||e.useFacetNormals,pointSizes:t.pointSizes,pointSize:t.pointSize||e.pointSize||1})},n.prototype.draw=function(t){t=t||{};var e=this.shell;this.mesh.draw({model:t.model||this.modelMatrix,projection:t.projection||c.perspective(c.create(),e.fov,e.width/e.height,e.zNear,e.zFar),view:t.view||e.camera.view(),lightPosition:t.lightPosition||e._defaultOptions.lightPosition,ambient:t.ambient||e._defaultOptions.ambient,diffuse:t.diffuse||e._defaultOptions.diffuse,specular:t.specular||e._defaultOptions.specular,specularExponent:t.specularExponent||e._defaultOptions.specularExponent})},n.prototype.dispose=function(){this.mesh.dispose()},e.exports=i},{"game-shell-orbit-camera":15,"gl-matrix":18,"gl-now":19,"gl-simplicial-complex":33}],95:[function(t,e,r){var n=t("mesh-viewer")({meshColor:[0,0,0]}),i=t("./")({majorRadius:.25,minorRadius:.05,majorSegments:64,minorSegments:64});n.on("viewer-init",function(){i=n.createMesh({positions:i.positions,cells:i.cells,vertexNormals:i.normals})}),n.on("gl-render",function(){i.draw()})},{"./":1,"mesh-viewer":94}]},{},[95]);
